!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("HlsJSPlugin",[],t):"object"==typeof exports?exports.HlsJSPlugin=t():e.HlsJSPlugin=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function n(e,t){var n=t.player,a=t.container,r=t.source,o=t.hlsjs,i=t.instance||(o?new n(o):new n);var s={};function c(t){e.emit("player.state",{state:t})}i.on(n.Events.FRAG_PARSING_METADATA,(function(e,t){try{var n=function(e){var t,n,a,r,o;t="";var i=e.length;for(n=0;n<i;)switch((a=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(a);break;case 12:case 13:r=e[n++],t+=String.fromCharCode((31&a)<<6|63&r);break;case 14:r=e[n++],o=e[n++],t+=String.fromCharCode((15&a)<<12|(63&r)<<6||(63&o)<<0)}return t}(t.samples[0].data),a=n.substring(n.indexOf("{"),n.indexOf("}")+1),r=JSON.parse(a),o=new Date(parseInt(r.ut,10));s[t.frag.sn]=o.getTime()}catch(t){console.error(e,t)}})),i.on(n.Events.FRAG_CHANGED,(function(t,n){s[n.frag.sn]&&e.emit("player.time",{timecode:s[n.frag.sn]})})),i.on(n.Events.LEVEL_LOADED,(function(t,n){try{if(!n.details.fragments[0].programDateTime)return;var r=a.currentTime-n.details.fragments[0].startPTS,o=new Date(n.details.fragments[0].programDateTime);o.setSeconds(o.getSeconds()+r),e.emit("player.time",{timecode:o.getTime()})}catch(e){console.error(t,e)}})),i.on(n.Events.MANIFEST_PARSED,(function(){a.play(),e.emit("player.ready",{playerContainer:a,instance:i})})),i.on(n.Events.ERROR,(function(t,n){e.emit("player.error",{event:t,data:n,type:n.fatal?"fatal":"warning",message:n.details})})),e.on("bridge.ready",(function(){return c(a.paused?"paused":"playing")}));var u=a.onplaying;a.onplaying=function(e){u&&u(e),c("playing")};var f=a.onpause;a.onpause=function(e){f&&f(e),c("paused")};var p=a.ontimeupdate;return a.ontimeupdate=function(t){p&&p(t),e.emit("player.position",{position:a.currentTime,duration:a.duration})},i.loadSource(r),i.attachMedia(a),i}return e.d(t,{default:()=>n}),t=t.default})()}));