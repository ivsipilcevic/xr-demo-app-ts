!function(e,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define("FlowplayerPlugin",[],a):"object"==typeof exports?exports.FlowplayerPlugin=a():e.FlowplayerPlugin=a()}(self,(function(){return(()=>{"use strict";var e={d:(a,t)=>{for(var r in t)e.o(t,r)&&!e.o(a,r)&&Object.defineProperty(a,r,{enumerable:!0,get:t[r]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)},a={};function t(e,a){var t=a.player,r=a.container,n=a.flowplayer,o=a.instance||t(r,n);var i={};function s(a){e.emit("player.state",{state:a})}o.on("loadedmetadata",(function(){o.play(),e.emit("player.ready",{playerContainer:r,instance:o})})),o.on("error",(function(a,t){e.emit("player.error",{event:a,data:t,type:t.fatal?"fatal":"warning",message:t.details})})),e.on("bridge.ready",(function(){return s(o.paused?"paused":"playing")}));var c=o.onplaying;o.onplaying=function(e){c&&c(e),s("playing")};var l=o.onpause;o.onpause=function(e){l&&l(e),s("paused")};var p=o.ontimeupdate;o.ontimeupdate=function(a){p&&p(a),e.emit("player.position",{position:o.currentTime,duration:o.duration})};var d=o.hls;return d&&(d.on("hlsFragParsingMetadata",(function(e,a){try{var t=function(e){var a,t,r,n,o;a="";var i=e.length;for(t=0;t<i;)switch((r=e[t++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:n=e[t++],a+=String.fromCharCode((31&r)<<6|63&n);break;case 14:n=e[t++],o=e[t++],a+=String.fromCharCode((15&r)<<12|(63&n)<<6||(63&o)<<0)}return a}(a.samples[0].data),r=t.substring(t.indexOf("{"),t.indexOf("}")+1),n=JSON.parse(r),o=new Date(parseInt(n.ut,10));i[a.frag.sn]=o.getTime()}catch(a){console.error(e,a)}})),d.on("hlsFragChanged",(function(a,t){i[t.frag.sn]&&e.emit("player.time",{timecode:i[t.frag.sn]})})),d.on("hlsLevelLoaded",(function(a,t){try{if(!t.details.fragments[0].programDateTime)return;var n=r.currentTime-t.details.fragments[0].startPTS,o=new Date(t.details.fragments[0].programDateTime);o.setSeconds(o.getSeconds()+n),e.emit("player.time",{timecode:o.getTime()})}catch(e){console.error(a,e)}}))),o}return e.d(a,{default:()=>t}),a=a.default})()}));