webpackJsonpjwplayer([3,13],{8:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.qualityLevel=function(t){return{bitrate:t.bitrate,label:t.label,width:t.width,height:t.height}}},10:function(t,e,i){var n,r;n=[i(1),i(12),i(2),i(16),i(15)],r=function(t,e,i,n,r){function s(t,e,i){t&&(t.removeEventListener?t.removeEventListener(e,i):t["on"+e]=null)}function a(){var e=this.video.textTracks,i=t.filter(e,(function(t){return(t.inuse||!t._id)&&l(t.kind)}));if(this._textTracks&&!b.call(this,i)){for(var n=-1,r=0;r<this._textTracks.length;r++)if("showing"===this._textTracks[r].mode){n=r;break}n!==this._currentTextTrackIndex&&this.setSubtitlesTrack(n+1)}else this.setTextTracks(e)}function o(){this.setTextTracks(this.video.textTracks)}function u(t){if(t){this._textTracks||this._initTextTracks();for(var e=0;e<t.length;e++){var i=t[e];if(!i.kind||l(i.kind)){var r=d.call(this,i);f.call(this,r),i.file&&(i.data=[],n.loadFile(i,this.addVTTCuesToTrack.bind(this,r),v))}}!this.renderNatively&&this._textTracks&&this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function h(t,e,n){if(i.isIE()&&t&&window.TextTrackCue){var r=new window.TextTrackCue(n.startTime,n.endTime,n.text);e.addCue(r)}else e.addCue(n)}function c(e,n){n&&n.length&&t.each(n,(function(t){if(!(i.isIE()&&e&&/^(native|subtitle|cc)/.test(t._id))){t.mode="disabled",t.mode="hidden";for(var n=t.cues.length;n--;)t.removeCue(t.cues[n]);t.embedded||(t.mode="disabled"),t.inuse=!1}}))}function l(t){return"subtitles"===t||"captions"===t}function d(e){var i,n=r.createLabel(e,this._unknownCount),s=n.label;if(this._unknownCount=n.unknownCount,this.renderNatively||"metadata"===e.kind){var a=this.video.textTracks;(i=t.findWhere(a,{label:s}))?(i.kind=e.kind,i.language=e.language||""):i=this.video.addTextTrack(e.kind,s,e.language||""),i.default=e.default,i.mode="disabled",i.inuse=!0}else(i=e).data=i.data||[];return i._id||(i._id=r.createId(e,this._textTracks.length)),i}function f(t){this._textTracks.push(t),this._tracksById[t._id]=t}function p(){if(this._textTracks){var e=t.filter(this._textTracks,(function(t){return t.embedded||"subs"===t.groupid}));this._initTextTracks(),t.each(e,(function(t){this._tracksById[t._id]=t})),this._textTracks=e}}function m(i){var n=i.currentTarget.activeCues;if(n&&n.length){var r=n[n.length-1].startTime;if(this._activeCuePosition!==r){var s=[];if(t.each(n,(function(t){t.startTime<r||(t.data||t.value?s.push(t):t.text&&this.trigger("meta",{metadataTime:r,metadata:JSON.parse(t.text)}))}),this),s.length){var a=e.parseID3(s);this.trigger("meta",{metadataTime:r,metadata:a})}this._activeCuePosition=r}}}function g(t,e){var i=t.kind;this._cachedVTTCues[t._id]||(this._cachedVTTCues[t._id]={});var n,r=this._cachedVTTCues[t._id];switch(i){case"captions":case"subtitles":n=Math.floor(20*e.startTime);var s="_"+e.line,a=Math.floor(20*e.endTime),o=r[n+s]||r[n+1+s]||r[n-1+s];return!(o&&Math.abs(o-a)<=1||(r[n+s]=a,0));case"metadata":var u=e.data?new Uint8Array(e.data).join(""):e.text;return!r[n=e.startTime+u]&&(r[n]=e.endTime,!0);default:return!1}}function b(t){if(t.length>this._textTracks.length)return!0;for(var e=0;e<t.length;e++){var i=t[e];if(!i._id||!this._tracksById[i._id])return!0}return!1}function v(t){i.log("CAPTIONS("+t+")")}var y={_itemTracks:null,_textTracks:null,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_currentTextTrackIndex:-1,_unknownCount:0,_activeCuePosition:null,_initTextTracks:function(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._unknownCount=0},addTracksListener:function(t,e,i){t&&(s(t,e,i),this.instreamMode||(t.addEventListener?t.addEventListener(e,i):t["on"+e]=i))},clearTracks:function(){n.cancelXhr(this._itemTracks);var t=this._tracksById&&this._tracksById.nativemetadata;(this.renderNatively||t)&&(c(this.renderNatively,this.video.textTracks),t&&(t.oncuechange=null)),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._activeCuePosition=null,this.renderNatively&&(this.removeTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),c(this.renderNatively,this.video.textTracks))},clearCueData:function(t){this._cachedVTTCues[t]&&(this._cachedVTTCues[t]={},this._tracksById[t].data=[])},disableTextTrack:function(){if(this._textTracks){var t=this._textTracks[this._currentTextTrackIndex];t&&(t.mode="disabled",(t.embedded||"nativecaptions"===t._id)&&(t.mode="hidden"))}},enableTextTrack:function(){if(this._textTracks){var t=this._textTracks[this._currentTextTrackIndex];t&&(t.mode="showing")}},getSubtitlesTrack:function(){return this._currentTextTrackIndex},removeTracksListener:s,addTextTracks:u,setTextTracks:function(e){if(this._currentTextTrackIndex=-1,e){if(this._textTracks?(this._textTracks=t.reject(this._textTracks,(function(t){if(this.renderNatively&&"nativecaptions"===t._id)return delete this._tracksById[t._id],!0}),this),delete this._tracksById.nativemetadata):this._initTextTracks(),e.length)for(var n=0,s=e.length;n<s;n++){var u=e[n];if(!u._id){if("captions"===u.kind||"metadata"===u.kind){if(u._id="native"+u.kind,!u.label&&"captions"===u.kind){var c=r.createLabel(u,this._unknownCount);u.name=c.label,this._unknownCount=c.unknownCount}}else u._id=r.createId(u,this._textTracks.length);if(this._tracksById[u._id])continue;u.inuse=!0}if(u.inuse&&!this._tracksById[u._id])if("metadata"===u.kind)u.mode="hidden",u.oncuechange=m.bind(this),this._tracksById[u._id]=u;else if(l(u.kind)){var d,p=u.mode;if(u.mode="hidden",!u.cues.length&&u.embedded)continue;if(u.mode=p,this._cuesByTrackId[u._id]&&!this._cuesByTrackId[u._id].loaded){for(var g=this._cuesByTrackId[u._id].cues;d=g.shift();)h(this.renderNatively,u,d);u.mode=p,this._cuesByTrackId[u._id].loaded=!0}f.call(this,u)}}this.renderNatively&&(this.textTrackChangeHandler=this.textTrackChangeHandler||a.bind(this),this.addTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),(i.isEdge()||i.isFF()||i.isSafari())&&(this.addTrackHandler=this.addTrackHandler||o.bind(this),this.addTracksListener(this.video.textTracks,"addtrack",this.addTrackHandler))),this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}},setupSideloadedTracks:function(t){if(this.renderNatively){var e=t===this._itemTracks;e||n.cancelXhr(this._itemTracks),this._itemTracks=t,t&&(e||(this.disableTextTrack(),p.call(this),this.addTextTracks(t)))}},setSubtitlesTrack:function(e){return this.renderNatively?void(this._textTracks&&(0===e&&t.each(this._textTracks,(function(t){t.mode=t.embedded?"hidden":"disabled"})),this._currentTextTrackIndex!==e-1&&(this.disableTextTrack(),this._currentTextTrackIndex=e-1,this._textTracks[this._currentTextTrackIndex]&&(this._textTracks[this._currentTextTrackIndex].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})))):void(this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(e-1))},textTrackChangeHandler:null,addTrackHandler:null,addCuesToTrack:function(t){var e=this._tracksById[t.name];if(e){e.source=t.source;for(var i=t.captions||[],r=[],s=!1,a=0;a<i.length;a++){var o=i[a],u=t.name+"_"+o.begin+"_"+o.end;this._metaCuesByTextTime[u]||(this._metaCuesByTextTime[u]=o,r.push(o),s=!0)}s&&r.sort((function(t,e){return t.begin-e.begin}));var h=n.convertToVTTCues(r);Array.prototype.push.apply(e.data,h)}},addCaptionsCue:function(t){if(t.text&&t.begin&&t.end){var e,i=t.trackid.toString(),r=this._tracksById&&this._tracksById[i];r||(r={kind:"captions",_id:i,data:[]},this.addTextTracks([r]),this.trigger("subtitlesTracks",{tracks:this._textTracks})),t.useDTS&&(r.source||(r.source=t.source||"mpegts")),e=t.begin+"_"+t.text;var s=this._metaCuesByTextTime[e];if(!s){s={begin:t.begin,end:t.end,text:t.text},this._metaCuesByTextTime[e]=s;var a=n.convertToVTTCues([s])[0];r.data.push(a)}}},addVTTCue:function(t){this._tracksById||this._initTextTracks();var e=t.track?t.track:"native"+t.type,i=this._tracksById[e],n="captions"===t.type?"Unknown CC":"ID3 Metadata",r=t.cue;if(!i){var s={kind:t.type,_id:e,label:n,embedded:!0};i=d.call(this,s),this.renderNatively||"metadata"===i.kind?this.setTextTracks(this.video.textTracks):u.call(this,[i])}g.call(this,i,r)&&(this.renderNatively||"metadata"===i.kind?h(this.renderNatively,i,r):i.data.push(r))},addVTTCuesToTrack:function(t,e){if(this.renderNatively){var i,n=this._tracksById[t._id];if(!n)return this._cuesByTrackId||(this._cuesByTrackId={}),void(this._cuesByTrackId[t._id]={cues:e,loaded:!1});if(!this._cuesByTrackId[t._id]||!this._cuesByTrackId[t._id].loaded)for(this._cuesByTrackId[t._id]={cues:e,loaded:!0};i=e.shift();)h(this.renderNatively,n,i)}},renderNatively:!1};return y}.apply(e,n),void 0===r||(t.exports=r)},21:function(t,e,i){var n,r;n=[i(29)],r=function(t){function e(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}}function i(t){function e(t,e,i,n){return 3600*(0|t)+60*(0|e)+(0|i)+(0|n)/1e3}var i=t.match(a);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}function n(){this.values=Object.create(null)}function r(t,e,i,n){for(var r=n?t.split(n):[t],s=0;s<=r.length;s+=1)if("string"==typeof r[s]){var a=r[s].split(i);if(2===a.length)e(a[0],a[1])}}function s(t,e,s){function a(){var e=i(t);if(null===e)throw new Error("Malformed timestamp: "+u);return t=t.replace(c,""),e}function o(){t=t.replace(f,"")}var u=t;if(o(),e.startTime=a(),o(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+u);t=t.substr(3),o(),e.endTime=a(),o(),function(t,e){var i=new n;r(t,(function(t,e){switch(t){case"region":for(var n=s.length-1;n>=0;n--)if(s[n].id===e){i.set(t,s[n].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":var r=e.split(","),a=r[0];i.integer(t,a),i.percent(t,a)&&i.set("snapToLines",!1),i.alt(t,a,["auto"]),2===r.length&&i.alt("lineAlign",r[1],["start",y,"end"]);break;case"position":r=e.split(","),i.percent(t,r[0]),2===r.length&&i.alt("positionAlign",r[1],["start",y,"end","line-left","line-right","auto"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start",y,"end","left","right"])}}),l,d),e.region=i.get("region",null),e.vertical=i.get("vertical","");var a=i.get("line","auto");"auto"===a&&-1===v.line&&(a=-1),e.line=a,e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align",y);var o=i.get("position","auto");"auto"===o&&50===v.position&&(o="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=o}(t,e)}var a=/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/,o=/^-?\d+$/,u=/\r\n|\n/,h=/^NOTE($|[ \t])/,c=/^[^\sa-zA-Z-]+/,l=/:/,d=/\s/,f=/^\s+/,p=/-->/,m=/^WEBVTT([ \t].*)?$/,g=window.requestAnimationFrame||function(t){return window.setTimeout(t,17)},b=function(t,i){this.window=t,this.state="INITIAL",this.buffer="",this.decoder=i||new e,this.regionList=[],this.maxCueBatch=1e3};n.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var n=0;n<i.length;++n)if(e===i[n]){this.set(t,e);break}},integer:function(t,e){o.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return(e=parseFloat(e))>=0&&e<=100&&(this.set(t,e),!0)}};var v=new t(0,0,0),y="middle"===v.align?"middle":"center";return b.prototype={parse:function(e,i){function n(){for(var t=c.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var i=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,c.buffer=t.substr(e),i}function a(t){r(t,(function(t,e){if("Region"===t)console.log("parse region",e)}),l)}function o(){"CUETEXT"===c.state&&c.cue&&c.oncue&&c.oncue(c.cue),c.cue=null,c.state="INITIAL"===c.state?"BADWEBVTT":"BADCUE"}var c=this;e&&(c.buffer+=c.decoder.decode(e,{stream:!0}));try{var d;if("INITIAL"===c.state){if(!u.test(c.buffer))return this;var f=(d=n()).match(m);if(!f||!f[0])throw new Error("Malformed WebVTT signature.");c.state="HEADER"}}catch(t){return o(),this}var b=!1,v=0;!function e(){try{for(;c.buffer&&v<=c.maxCueBatch;){if(!u.test(c.buffer))return c.flush(),this;switch(b?b=!1:d=n(),c.state){case"HEADER":l.test(d)?a(d):d||(c.state="ID");break;case"NOTE":d||(c.state="ID");break;case"ID":if(h.test(d)){c.state="NOTE";break}if(!d)break;if(c.cue=new t(0,0,""),c.state="CUE",!p.test(d)){c.cue.id=d;break}case"CUE":try{s(d,c.cue,c.regionList)}catch(t){c.cue=null,c.state="BADCUE";break}c.state="CUETEXT";break;case"CUETEXT":var r=p.test(d);if(!d||r&&(b=!0)){c.oncue&&(v+=1,c.oncue(c.cue)),c.cue=null,c.state="ID";break}c.cue.text&&(c.cue.text+="\n"),c.cue.text+=d;break;case"BADCUE":d||(c.state="ID")}}if(v=0,c.buffer)g(e);else if(!i)return c.flush(),this}catch(t){return o(),this}}()},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse(void 0,!0)),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}},b}.apply(e,n),void 0===r||(t.exports=r)},39:function(t,e,i){var n,r;n=[i(2)],r=function(t){return{container:null,volume:function(e){e=t.between(e/100,0,1),this.video.volume=e},mute:function(t){this.video.muted=!!t,this.video.muted||this.video.removeAttribute("muted")},resize:function(e,i,n){if(!(e&&i&&this.video.videoWidth&&this.video.videoHeight))return!1;if("uniform"===n){var r=e/i,s=this.video.videoWidth/this.video.videoHeight,a=null;Math.abs(r-s)<.09&&(a="fill"),t.style(this.video,{objectFit:a})}return!1},getContainer:function(){return this.container},setContainer:function(t){this.container=t,t.insertBefore(this.video,t.firstChild)},remove:function(){this.stop(),this.destroy(),this.container===this.video.parentNode&&this.container.removeChild(this.video)},getVideo:function(e,i){var n=i||document.getElementById(e),r=n?n.querySelector("video"):null;return r||(r=document.createElement("video"),t.isMobile()&&r.setAttribute("jw-gesture-required","")),r.className="jw-video jw-reset",this.video=r,r}}}.apply(e,n),void 0===r||(t.exports=r)},40:function(t,e,i){var n,r;n=[i(3),i(9),i(5),i(1)],r=function(t,e,i,n){return{stallCheckTimeout_:-1,lastStalledTime_:NaN,trigger:function(e,i){return t.trigger.call(this,e,i)},setState:function(t){return e.setState.call(this,t)},attachMedia:function(){this.eventsOn_()},detachMedia:function(){return this.stopStallCheck(),this.eventsOff_(),this.video},stopStallCheck:function(){clearTimeout(this.stallCheckTimeout_)},startStallCheck:function(){n.isNaN(this.lastStalledTime_)&&this.stalledHandler(),this.stopStallCheck(),this.stallCheckTimeout_=setTimeout(this.stalledHandler.bind(this),256)},stalledHandler:function(){return this.lastStalledTime_!==this.video.currentTime?void(this.lastStalledTime_=this.video.currentTime):void(this.video.paused||this.video.ended||this.state!==i.LOADING&&this.state!==i.ERROR&&(this.seeking||this.setState(i.STALLED)))},setAutoplayAttributes:function(){this.video.setAttribute("autoplay",""),this.video.setAttribute("muted","")},removeAutoplayAttributes:function(){this.video.removeAttribute("autoplay"),this.video.removeAttribute("muted")}}}.apply(e,n),void 0===r||(t.exports=r)},41:function(t,e,i){var n,r;n=[i(2),i(5)],r=function(t,e){return{seeking:!1,loadedmetadata:function(){var t={duration:this.getDuration(),height:this.video.videoHeight,width:this.video.videoWidth},e=this.drmUsed;e&&(t.drm=e),this.trigger("meta",t)},timeupdate:function(){this.stopStallCheck();var t=this.video.videoHeight;t!==this._helperLastVideoHeight&&this.adaptation&&this.adaptation({size:{width:this.video.videoWidth,height:t}}),this._helperLastVideoHeight=t,this.state!==e.STALLED&&this.state!==e.LOADING||this.setState(e.PLAYING),this.startStallCheck();var i=this.getCurrentTime(),n={position:i,duration:this.getDuration()};if(this.getPtsOffset){var r=this.getPtsOffset();r>=0&&(n.metadata={mpegts:r+i})}(this.state===e.PLAYING||this.seeking)&&this.trigger("time",n)},click:function(t){this.trigger("click",t)},volumechange:function(){var t=this.video;this.trigger("volume",{volume:Math.round(100*t.volume)}),this.trigger("mute",{mute:t.muted})},seeked:function(){this.seeking&&(this.seeking=!1,this.trigger("seeked"))},playing:function(){this.setState(e.PLAYING),this.video.hasAttribute("jw-gesture-required")&&this.video.removeAttribute("jw-gesture-required"),this.trigger("providerFirstFrame")},pause:function(){this.state!==e.COMPLETE&&(this.video.ended||this.video.currentTime!==this.video.duration&&this.setState(e.PAUSED))},progress:function(){var e=this.getDuration();if(!(e<=0||e===1/0)){var i=this.video.buffered;if(i&&0!==i.length){var n=t.between(i.end(i.length-1)/e,0,1);this.trigger("bufferChange",{bufferPercent:100*n,position:this.getCurrentTime(),duration:e})}}},ended:function(){this.stopStallCheck(),this._helperLastVideoHeight=0,this.state!==e.IDLE&&this.state!==e.COMPLETE&&this.trigger("complete")},loadeddata:function(){this.setTextTracks(this.video.textTracks),this.video.setAttribute("jw-loaded","data")},error:function(){var t=this.video.error&&this.video.error.code||-1,e={1:"Unknown operation aborted",2:"Unknown network error",3:"Unknown decode error",4:"Source not supported"}[t]||"Unknown";this.trigger("mediaError",{code:t,message:"Error playing file: "+e})}}}.apply(e,n),void 0===r||(t.exports=r)},71:function(t,e,i){var n,r,s=i(8);n=[i(1),i(20),i(107),i(2),i(5),i(4),i(3),i(41),i(39),i(40),i(10),i(25),i(160),i(171)],r=function(t,e,i,n,r,a,o,u,h,c,l,d,f,p){function m(f,m){function b(){j.addEventListener("error",w),j.addEventListener("trackschanged",C),t.each(F,(function(t,e){V.video.addEventListener(e,t,!1)}))}function v(t,e){return n.generateLabel(t,m.qualityLabels,e)}function y(){j.removeEventListener("error",w),j.removeEventListener("trackschanged",C),t.each(F,(function(t,e){V.video.removeEventListener(e,t)}))}function T(){var t=V.video;y(),j.destroy(),V.video=V.video=t,window.VTTCue=g}function w(t){var e=t.detail?t.detail.category:t.category,i=t.detail?t.detail.code:t.code;if(e!==p.util.Error.Category.NETWORK){if(i===p.util.Error.Code.MP4_SIDX_WRONG_BOX_TYPE){var n=L();return null!==n&&O(n),void console.error("The MP4 SIDX parser found the wrong box type.")}M(),V.trigger(a.JWPLAYER_MEDIA_ERROR,{message:"Error playing file: Unknown playback error"})}else V.trigger(a.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: File could not be played"})}function k(){return V.currentQuality}function E(t){return V._helperLastVideoHeight=0,p.polyfill.installAll(),new p.Player(t)}function S(){var t=V.video.play();t&&t.catch?t.catch((function(t){console.warn(t),"NotAllowedError"===t.name&&V.video.hasAttribute("jw-gesture-required")&&V.trigger("autoplayFailed")})):V.video.hasAttribute("jw-gesture-required")&&V.trigger("autoplayFailed")}function I(t){var e=t.sources[0].file,i=t.starttime||0;U=!0,B=t.sources[0].drm||{},V.loadedItem=t,V.setupSideloadedTracks(t.tracks),j.configure({drm:P(),abr:{enabled:V.abr}}),(t.withCredentials||H.withCredentials)&&j.getNetworkingEngine().registerRequestFilter((function(t,e){e.allowCrossSiteCredentials=!0})),j.load(e,i).then(_,w),V.on(a.JWPLAYER_PLAYER_STATE,(function(){var t=V.video;V.state===r.STALLED&&t&&t.buffered&&t.buffered.length>0&&t.currentTime<t.buffered.start(0)&&V.seek(t.buffered.start(0))}))}function _(){V.trigger(a.JWPLAYER_MEDIA_BUFFER_FULL)}function x(t){var e=0===t,i=V.shakaTracks[t-1],n=V.shakaAudioTracks[R()];V.abr===e&&k()===t||(V.abr=e,V.abr?j.configure({abr:{enabled:V.abr}}):j.selectTrack(i),j.configure({preferredAudioLanguage:n.language}))}function A(t){var e=V.shakaAudioTracks[t];j.configure({preferredAudioLanguage:e.language})}function C(){var e,i={};V.video.textTracks&&"Shaka Player TextTrack"===V.video.textTracks[0].label&&(V.video.textTracks[0].embedded=!0,V.video.textTracks[0].inuse=!0),t.each(j.getTracks(),(function(t){i[t.type]=i[t.type]||[],i[t.type].push(t)})),i.audio&&i.audio.length>0&&(e="audio",D(i.audio),V.jwTracks=V.audioTracks,A(V.currentAudioIndex)),i.video&&i.video.length>0&&(e="video",function(e){V.shakaTracks=e,V.currentQuality=0,e.sort((function(t,e){return t.height&&e.height?e.height-t.height:e.bandwidth-t.bandwidth}));var i=n.hasRedundantLevels(e);V.jwTracks=t.map(e,(function(t){return{shakaId:t.id,bitrate:t.bandwidth,label:v(t,i),height:t.height,width:t.width}})),e.length>1&&V.jwTracks.unshift({label:"Auto",shakaId:"auto"}),V.trigger(a.JWPLAYER_MEDIA_LEVELS,{levels:V.jwTracks,currentQuality:V.currentQuality})}(i.video),x(V.currentQuality)),V.trigger(a.JWPLAYER_MEDIA_TYPE,{mediaType:e})}function P(){var t,e,i={},n="";if(d.isSupported("clearkey")&&B.clearkey)return(e=B.clearkey).keyId=e.keyId?e.keyId.replace(/-/g,""):null,i.clearKeys={},i.clearKeys[e.keyId]=e.key,i;if(d.isSupported("widevine"))V.drmUsed="widevine",t="com.widevine.alpha",n="http://widevine-proxy.appspot.com/proxy";else{if(!d.isSupported("playready"))return i;V.drmUsed="playready",t="com.microsoft.playready",n="http://microsoft-proxy.appspot.com/proxy"}return(e=B[V.drmUsed])?(i.servers=i.servers||{},i.servers[t]=e.url||n,j.getNetworkingEngine().registerRequestFilter((function(t,i){t===p.net.NetworkingEngine.RequestType.LICENSE&&e&&function(t,e){var i=t.headers,n=t.customData;if(i)for(var r=0;r<i.length;r++){var s=i[r];e.headers[s.name]=s.value}n&&(e.headers.customData=n)}(e,i)})),i):i}function N(e){return t.isNumber(e)&&!t.isNaN(e)&&e>=0&&e<t.size(V.audioTracks)}function R(){return N(V.currentAudioIndex)?V.currentAudioIndex:-1}function D(e){t.isArray(e)&&(V.shakaTracks=e,V.shakaAudioTracks=e,V.audioTracks=function(e){return t.map(e,(function(r,s){var a=r.language,o=t.where(e,{language:a}).length>1,u=i.getLabel(a);return"und"===a?u="Unknown":"dv"===a&&(u="Audio Description"),o&&(u+=" ("+n.toKbps(r.bandwidth)+" kbps)"),{autoselect:!1,defaulttrack:r.active,groupid:"default",language:r.language,name:u,shakaIndex:s,shakaId:r.id}}))}(e),V.currentAudioIndex=function(){var e;return N(V.currentAudioIndex)?V.currentAudioIndex:((e=t.find(V.audioTracks,(function(t){return t.defaulttrack&&"dv"!==t.language})))||(e=t.find(V.audioTracks,(function(t){return"dv"!==t.language}))),e?e.shakaIndex:0)}(),V.trigger(a.JWPLAYER_AUDIO_TRACKS,{tracks:V.audioTracks,currentTrack:V.currentAudioIndex}))}function M(){y(),V.video.pause(),V.setState(r.IDLE)}function L(){var e=t.findWhere(V.shakaTracks,{active:!0});if(e)for(var i=0;i<V.jwTracks.length;i+=1)if(e.id===V.jwTracks[i].shakaId)return i;return null}function O(t){V.currentQuality===t||t<0||t>=V.jwTracks.length||(V.trigger(a.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:t,levels:V.jwTracks}),x(t),A(R()),V.currentQuality=t,S())}var j,B,U,F={},V=this,K="VOD",H=m;this.video=h.getVideo.call(V,f),this.loadedItem=null,this.drmUsed=null,this.position=0,this.levels=[],this.currentQuality=-1,this.abr=!0,t.each(u,(function(t,e){"function"==typeof t?F[e]=t.bind(V):V[e]=t})),V.adaptation=function(t){V.shakaTracks||C();var e=j.getStats(),i=function(t,e,i){for(var n={index:0,track:null},r=e.length;r--;)for(var s=e[r].id,a=i.length;a--;){var o=i[a];if(s===o.id&&o.height===t)return n.index=a+1,n.track=o,n}return n}(t.size.height,e.switchHistory,V.shakaTracks),n=V.jwTracks?V.jwTracks[i.index]:null,r=n?n.label:v(i.track),s={level:{index:i.index,label:r,bitrate:e.streamBandwidth,width:t.size.width,height:t.size.height},bandwidth:e.estimatedBandwidth,type:"visualQuality"};U?(s.reason="initial choice",s.mode="auto",U=!1):0===V.currentQuality?s.reason=s.mode="auto":(s.reason="api",s.mode="manual"),V.trigger("visualQuality",s)},t.extend(V,o,h,c,l,{eventsOn_:function(){j=E(V.video),b()},eventsOff_:function(){B&&n.isFF()?(V.remove(),V.video=V.getVideo(f,V.container),V.setContainer(V.container)):T()},init:function(t){j||(j=E(V.video)),V.currentAudioIndex=-1,(n.isAndroid()||t.preload&&"none"!==t.preload)&&(y(),b(),I(t))},load:function(t){y(),b(),V.setState(r.LOADING),V.loadedItem!==t?(V.clearTracks(),V.drmUsed=null,I(t)):(function(t){V.video.textTracks&&(t&&t.length&&V.setupSideloadedTracks(t),V.setTextTracks(V.video.textTracks))}(t.tracks),V.video.currentTime=0,S())},pause:function(){V.video.pause(),V.setState(r.PAUSED)},getQualityLevels:function(){return t.map(V.jwTracks,(function(t){return(0,s.qualityLevel)(t)}))},getCurrentQuality:k,getAudioTracks:function(){return t.isArray(V.audioTracks)?V.audioTracks:[]},getCurrentAudioTrack:R,play:function(){return V.seeking?(V.setState(r.LOADING),void V.once(a.JWPLAYER_MEDIA_SEEKED,V.play)):(V.setState(r.LOADING),S(),void V.setVisibility(V))},seek:function(t){if("LIVE"!==K){var e=j.seekRange(),i=t,n=t;t<0&&(i=e.end-e.start+t,n=e.end+t),V.trigger(a.JWPLAYER_MEDIA_SEEK,{position:V.getCurrentTime(),offset:i}),V.seeking=!0,V.video.currentTime=n}},setCurrentQuality:O,setAudioTracks:D,setCurrentAudioTrack:function(t){N(t)&&(V.trigger(a.JWPLAYER_AUDIO_TRACKS,{tracks:V.audioTracks,currentTrack:t}),V.trigger(a.JWPLAYER_AUDIO_TRACK_CHANGED,{tracks:V.audioTracks,currentTrack:t}),A(t),V.currentAudioIndex=t)},setVisibility:function(t){(t=!!t)?e.style(this.container,{visibility:"visible",opacity:1}):e.style(this.container,{visibility:"",opacity:0})},stop:M,getCurrentTime:function(){var t=V.video.currentTime;return j.isLive()&&"DVR"===K&&(t=-(j.seekRange().end-t)),t},getDuration:function(){var t=V.loadedItem.minDvrWindow,e=V.video.duration;if(j.isLive()){var i=j.seekRange();e=-(i.end-i.start),e=n.isDvr(e,t)?e:1/0}return K=n.streamType(e,t),e},setShakaPlayer:function(t){j=t},supportsFullscreen:t.constant(!0),getName:t.constant({name:"shaka"}),destroy:T,renderNatively:!0})}var g=window.VTTCue;return p.media.TextEngine.registerParser("text/vtt",f),p.media.TextEngine.registerParser('text/vtt; codecs="vtt"',f),m.getName=t.constant({name:"shaka"}),m}.apply(e,n),void 0===r||(t.exports=r)},107:function(t,e,i){var n;n=function(){var t={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};return{getLabel:function(e){return t[e]||e}}}.apply(e,[]),void 0===n||(t.exports=n)},159:function(t,e,i){var n,r;n=[i(21),i(2)],r=function(t,e){var i=this;return i.parser=new t(window),i.getCue=function(t){return(e.isIE(11)||e.isEdge())&&window.TextTrackCue?new window.TextTrackCue(t.startTime,t.endTime,t.text):t},i.arrayBufferToString=function(t){var e,i;return t?(239===(e=new Uint8Array(t))[0]&&187===e[1]&&191===e[2]&&(e=e.subarray(3)),i=String.fromCharCode.apply(null,e),window.decodeURIComponent(window.escape(i))):""},i.parseCuesFromText=function(t){var e=[];return i.parser.oncue=function(t){e.push(i.getCue(t))},i.parser.parse(t),e},i}.apply(e,n),void 0===r||(t.exports=r)},160:function(t,e,i){var n,r;n=[i(159)],r=function(t){return function(e){var i=t.arrayBufferToString(e);return i=i.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),t.parseCuesFromText(i)}}.apply(e,n),void 0===r||(t.exports=r)},171:function(t,e,i){var n;!function(){var r={};(function(t){function e(t,e){var i,n=t.split("."),r=Jn;n[0]in r||!r.execScript||r.execScript("var "+n[0]);for(;n.length&&(i=n.shift());)n.length||void 0===e?r=r[i]?r[i]:r[i]={}:r[i]=e}function i(t){function e(){}var i=I;e.prototype=i.prototype,t.qd=i.prototype,t.prototype=new e,t.prototype.constructor=t,t.nd=function(t,e,n){return i.prototype[e].apply(t,Array.prototype.slice.call(arguments,2))}}function n(t){this.c=Math.exp(Math.log(.5)/t),this.b=this.a=0}function r(t,e,i){var n=Math.pow(t.c,e);i=i*(1-n)+n*t.a,isNaN(i)||(t.a=i,t.b+=e)}function s(t){return t.a/(1-Math.pow(t.c,t.b))}function a(){this.c=new n(2),this.f=new n(5),this.a=0,this.b=5e5}function o(){}function u(){this.h=null,this.f=!1,this.b=new a,this.g={},this.a={},this.i=!1,this.c=null}function h(t){return(t=t.g.audio)?(t=l(t))[Math.floor(t.length/2)]:null}function c(t){if(!(e=t.g.video))return null;var e=l(e),i=(i=t.a.audio)&&i.bandwidth||0;t=t.b.getBandwidthEstimate();for(var n=e[0],r=0;r<e.length;++r){var s=e[r];if(s.bandwidth){var a=((r+1<e.length?e[r+1]:{bandwidth:1/0}).bandwidth+i)/.85;t>=(s.bandwidth+i)/.95&&t<=a&&(n=s)}}return n}function l(t){return t.streams.slice(0).filter((function(t){return t.allowedByApplication&&t.allowedByKeySystem})).sort((function(t,e){return t.bandwidth-e.bandwidth}))}function d(e,i){var n,r=i||{};for(n in r)this[n]=r[n];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=t.performance&&t.performance.now?t.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function f(t){return JSON.stringify(t,(function(t,e){if("manager"!=t&&"function"!=typeof e){if(e instanceof Event||e instanceof d){var i,n={};for(i in e){var r=e[i];r&&"object"==typeof r||i in Event||(n[i]=r)}return n}if(e instanceof TimeRanges)for(n={__type__:"TimeRanges",length:e.length,start:[],end:[]},i=0;i<e.length;++i)n.start.push(e.start(i)),n.end.push(e.end(i));else n="number"==typeof e?isNaN(e)?"NaN":isFinite(e)?e:0>e?"-Infinity":"Infinity":e;return n}}))}function p(t){return JSON.parse(t,(function(t,e){return"NaN"==e?NaN:"-Infinity"==e?-1/0:"Infinity"==e?1/0:e&&"object"==typeof e&&"TimeRanges"==e.__type__?function(t){return{length:t.length,start:function(e){return t.start[e]},end:function(e){return t.end[e]}}}(e):e}))}function m(t,e,i){this.category=t,this.code=e,this.data=Array.prototype.slice.call(arguments,2)}function g(){var t,e,i=new Promise((function(i,n){t=i,e=n}));return i.resolve=t,i.reject=e,i}function b(t,e,i,n,r){this.C=t,this.l=e,this.A=i,this.B=n,this.s=r,this.f=this.j=this.h=!1,this.v="",this.a=this.i=null,this.b={video:{},player:{}},this.m=0,this.c={},this.g=null}function v(t){for(var e in t.c){var i=t.c[e];delete t.c[e],i.reject(new m(7,7e3))}}function y(t,e){var i=f(e);t.a.sendMessage("urn:x-cast:com.google.shaka.v2",i,(function(){}),o)}function T(){this.a={}}function w(){this.a=new T}function k(t,e,i,n){e=new S(e,i,n),t.a.push(i,e)}function E(t){var e,i=t.a,n=[];for(e in i.a)n.push.apply(n,i.a[e]);for(i=0;i<n.length;++i)n[i].la();t.a.a={}}function S(t,e,i){this.target=t,this.type=e,this.a=i,this.target.addEventListener(e,i,!1)}function I(){this.Ba=new T,this.U=this}function _(t,e,i){I.call(this),this.c=t,this.b=e,this.h=this.f=this.g=this.i=this.j=null,this.a=new b(i,this.Vc.bind(this),this.Wc.bind(this),this.Xc.bind(this),this.qb.bind(this)),function(t){for(var e in t.a.init(),t.h=new w,Xn.forEach(function(t){k(this.h,this.c,t,this.kd.bind(this))}.bind(t)),er.forEach(function(t){k(this.h,this.b,t,this.Cc.bind(this))}.bind(t)),t.j={},t.c)Object.defineProperty(t.j,e,{configurable:!1,enumerable:!0,get:t.jd.bind(t,e),set:t.ld.bind(t,e)});for(e in t.i={},t.b)Object.defineProperty(t.i,e,{configurable:!1,enumerable:!0,get:t.Bc.bind(t,e)});t.g=new I,t.g.U=t.j,t.f=new I,t.f.U=t.i}(this)}function x(t,e,i){I.call(this),this.b=t,this.a=e,this.i={video:t,player:e},this.j=i||function(){},this.h=!1,this.c=!0,this.f=this.g=null,A(this)}function A(e){var i=cast.receiver.CastReceiverManager.getInstance();i.onSenderConnected=e.Ab.bind(e),i.onSenderDisconnected=e.Ab.bind(e),i.onSystemVolumeChanged=e.Xb.bind(e),e.g=i.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.g.onMessage=e.mc.bind(e),i.start(),Xn.forEach(function(t){this.b.addEventListener(t,this.Db.bind(this,"video"))}.bind(e)),er.forEach(function(t){this.a.addEventListener(t,this.Db.bind(this,"player"))}.bind(e)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.a.gb(3840,2160):e.a.gb(1920,1080),e.a.addEventListener("loading",function(){this.c=!1,C(this)}.bind(e)),e.b.addEventListener("playing",function(){this.c=!1,C(this)}.bind(e)),e.a.addEventListener("unloading",function(){this.c=!0,C(this)}.bind(e)),e.b.addEventListener("ended",function(){t.setTimeout(function(){this.b&&this.b.ended&&(this.c=!0,C(this))}.bind(this),5e3)}.bind(e))}function C(t){Promise.resolve().then(function(){this.dispatchEvent(new d("caststatuschanged"))}.bind(t))}function P(t,e,i){t.h&&(e=f(e),i?t.g.getCastChannel(i).send(e):t.g.broadcast(e))}function N(t,e){return t.concat(e)}function R(){}function D(t){return null!=t}function M(t){return function(e){return e!=t}}function L(t,e,i){return i.indexOf(t)==e}function O(t){return!t||!Object.keys(t).length}function j(t){return Object.keys(t).map((function(e){return t[e]}))}function B(t,e){return Object.keys(t).reduce((function(i,n){return i[n]=e(t[n],n),i}),{})}function U(t,e){return Object.keys(t).every((function(i){return e(i,t[i])}))}function F(e){return t.btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")}function V(e){e=t.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var i=new Uint8Array(e.length),n=0;n<e.length;++n)i[n]=e.charCodeAt(n);return i}function K(e){for(var i=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)i[n/2]=t.parseInt(e.substr(n,2),16);return i}function H(t){for(var e="",i=0;i<t.length;++i){var n=t[i].toString(16);1==n.length&&(n="0"+n),e+=n}return e}function q(t,e){if(!t&&!e)return!0;if(!t||!e||t.length!=e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!=e[i])return!1;return!0}function G(t,e){var i=z(t,e);return 1!=i.length?null:i[0]}function z(t,e){return Array.prototype.filter.call(t.childNodes,(function(t){return t.tagName==e}))}function W(t){var e=t.firstChild;return e&&e.nodeType==Node.TEXT_NODE?t.textContent.trim():null}function Y(t,e,i,n){var r=null;return null!=(t=t.getAttribute(e))&&(r=i(t)),null==r?void 0!==n?n:null:r}function $(t){return t?(t=Date.parse(t),isNaN(t)?null:Math.floor(t/1e3)):null}function J(t){return t&&(t=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(t))?(t=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null),isFinite(t)?t:null):null}function X(t){var e=/([0-9]+)-([0-9]+)/.exec(t);return e?(t=Number(e[1]),isFinite(t)?(e=Number(e[2]),isFinite(e)?{start:t,end:e}:null):null):null}function Q(t){return(t=Number(t))%1?null:t}function Z(t){return!((t=Number(t))%1)&&0<t?t:null}function tt(t){return!((t=Number(t))%1)&&0<=t?t:null}function et(t){var e;return t=(e=t.match(/^(\d+)\/(\d+)$/))?Number(e[1]/e[2]):Number(t),isNaN(t)?null:t}function it(t,e){var i=function(t){return t.map((function(t){var e=t.getAttribute("schemeIdUri"),i=t.getAttribute("cenc:default_KID"),n=z(t,"cenc:pssh").map(W);if(!e)return null;if(e=e.toLowerCase(),i&&0<=(i=i.replace(/-/g,"").toLowerCase()).indexOf(" "))throw new m(4,4009);var r=[];try{r=n.map((function(t){return{initDataType:"cenc",initData:V(t)}}))}catch(t){throw new m(4,4007)}return{node:t,Ib:e,keyId:i,init:0<r.length?r:null}})).filter(D)}(t),n=null,r=i.filter((function(t){return"urn:mpeg:dash:mp4protection:2011"!=t.Ib||(n=t.init||n,!1)})),s=i.map((function(t){return t.keyId})).filter(D),a=null;if(0<s.length&&(a=s[0],s.some(M(a))))throw new m(4,4010);return s=[],0<r.length?(s=function(t,e,i){return i.map((function(i){var n=or[i.Ib];return n?[nt(n,i.init||t)]:e(i.node)||[]})).reduce(N,[])}(n,e,r),s.length||(s=[nt("",n)])):0<i.length&&(s=j(or).map((function(t){return nt(t,n)}))),{nb:a,od:n,drmInfos:s,pb:!0}}function nt(t,e){return{keySystem:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:e||[],keyIds:[]}}function rt(t){var e;t instanceof rt?(st(this,t.T),this.ma=t.ma,this.V=t.V,at(this,t.ya),this.P=t.P,ot(this,dt(t.a)),this.da=t.da):t&&(e=String(t).match(ur))?(st(this,e[1]||"",!0),this.ma=ut(e[2]||""),this.V=ut(e[3]||"",!0),at(this,e[4]),this.P=ut(e[5]||"",!0),ot(this,e[6]||"",!0),this.da=ut(e[7]||"")):this.a=new lt(null)}function st(t,e,i){t.T=i?ut(e,!0):e,t.T&&(t.T=t.T.replace(/:$/,""))}function at(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.ya=e}else t.ya=null}function ot(t,e,i){e instanceof lt?t.a=e:(i||(e=ht(e,dr)),t.a=new lt(e))}function ut(t,e){return t?e?decodeURI(t):decodeURIComponent(t):""}function ht(t,e,i){return"string"==typeof t?(t=encodeURI(t).replace(e,ct),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ct(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}function lt(t){this.b=t||null}function dt(t){var e=new lt;if(e.b=t.b,t.a){var i,n={};for(i in t.a)n[i]=t.a[i].concat();e.a=n,e.c=t.c}return e}function ft(t,e,i){this.a=t,this.M=e,this.D=i}function pt(t,e,i,n,r,s){this.position=t,this.startTime=e,this.endTime=i,this.a=n,this.M=r,this.D=s}function mt(e,i,n,r,s){null!==s&&(s=Math.round(s));var a={RepresentationID:i,Number:n,Bandwidth:r,Time:s};return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,(function(e,i,n){if("$$"==e)return"$";var r=a[i];return null==r?e:("RepresentationID"==i&&n&&(n=void 0),e=r.toString(),n=t.parseInt(n,10)||1,Array(Math.max(0,n-e.length)+1).join("0")+e)}))}function gt(t,e,i){if(i.length){var n=i[0];n.startTime<=mr&&(i[0]=new pt(n.position,0,n.endTime,n.a,n.M,n.D)),t||((t=i[i.length-1]).startTime>e||(i[i.length-1]=new pt(t.position,t.startTime,e,t.a,t.M,t.D)))}}function bt(t,e){if(!e.length)return t;var i=e.map((function(t){return new rt(t)}));return t.map((function(t){return new rt(t)})).map((function(t){return i.map(t.resolve.bind(t))})).reduce(N,[]).map((function(t){return t.toString()}))}function vt(t,e){var i=yt(t,e,"timescale"),n=1;i&&(n=Z(i)||1),(i=Z((i=yt(t,e,"duration"))||""))&&(i/=n);var r=yt(t,e,"startNumber"),s=yt(t,e,"presentationTimeOffset"),a=tt(r||"");null!=r&&null!=a||(a=1);r=null;if(h=Tt(t,e,"SegmentTimeline")){r=n;for(var o=Number(s),u=t.I.duration||1/0,h=z(h,"S"),c=[],l=0,d=0;d<h.length;++d){var f=Y(m=h[d],"t",tt),p=Y(m,"d",tt),m=Y(m,"r",Q);if(null!=f&&(f-=o),!p)break;if(f=null!=f?f:l,0>(m=m||0))if(d+1<h.length){if(null==(m=Y(h[d+1],"t",tt)))break;if(f>=m)break;m=Math.ceil((m-f)/p)-1}else{if(1/0==u)break;if(f/r>=u)break;m=Math.ceil((u*r-f)/p)-1}0<c.length&&f!=l&&(c[c.length-1].end=f/r);for(var g=0;g<=m;++g)l=f+p,c.push({start:f/r,end:l/r,gd:f}),f=l}r=c}return{timescale:n,G:i,ja:a,presentationTimeOffset:Number(s)/n||0,lb:Number(s),w:r}}function yt(t,e,i){return[e(t.u),e(t.R),e(t.L)].filter(D).map((function(t){return t.getAttribute(i)})).reduce((function(t,e){return t||e}))}function Tt(t,e,i){return[e(t.u),e(t.R),e(t.L)].filter(D).map((function(t){return G(t,i)})).reduce((function(t,e){return t||e}))}function wt(t){if(!t)return"";239==(t=new Uint8Array(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),t=escape(St(t));try{return decodeURIComponent(t)}catch(t){throw new m(2,2004)}}function kt(t,e){if(!t)return"";if(t.byteLength%2)throw new m(2,2004);var i;t instanceof ArrayBuffer?i=t:((n=new Uint8Array(t.byteLength)).set(new Uint8Array(t)),i=n.buffer);var n=t.byteLength/2,r=new Uint16Array(n);i=new DataView(i);for(var s=0;s<n;s++)r[s]=i.getUint16(2*s,e);return St(r)}function Et(t){t=unescape(encodeURIComponent(t));for(var e=new Uint8Array(t.length),i=0;i<t.length;++i)e[i]=t.charCodeAt(i);return e.buffer}function St(t){for(var e="",i=0;i<t.length;i+=16e3)e+=String.fromCharCode.apply(null,t.subarray(i,i+16e3));return e}function It(t){this.b=t,this.c=0==gr,this.a=0}function _t(t){return t.a<t.b.byteLength}function xt(t){try{var e=t.b.getUint8(t.a)}catch(t){Dt()}return t.a+=1,e}function At(t){try{var e=t.b.getUint32(t.a,t.c)}catch(t){Dt()}return t.a+=4,e}function Ct(t){var e,i;try{t.c?(e=t.b.getUint32(t.a,!0),i=t.b.getUint32(t.a+4,!0)):(i=t.b.getUint32(t.a,!1),e=t.b.getUint32(t.a+4,!1))}catch(t){Dt()}if(2097151<i)throw new m(3,3001);return t.a+=8,i*Math.pow(2,32)+e}function Pt(t,e){t.a+e>t.b.byteLength&&Dt();var i=t.b.buffer.slice(t.a,t.a+e);return t.a+=e,new Uint8Array(i)}function Nt(t,e){t.a+e>t.b.byteLength&&Dt(),t.a+=e}function Rt(t){var e=t.a;try{for(;_t(t)&&t.b.getUint8(t.a);)t.a+=1}catch(t){Dt()}return e=t.b.buffer.slice(e,t.a),t.a+=1,wt(e)}function Dt(){throw new m(3,3e3)}function Mt(t,e){for(;_t(e);){var i=e.a,n=At(e),r=At(e);if(1==n?n=Ct(e):n||(n=e.b.byteLength-i),r==t)return n;Nt(e,n-(e.a-i))}return-1}function Lt(t,e){for(var i=new It(new DataView(t)),n=[[1836019574,0],[1953653099,0],[1835297121,0],[1835626086,0],[1937007212,0],[1937011556,8],[e,0]],r=-1,s=0;s<n.length;s++){var a=n[s][1];if(-1==(r=Mt(n[s][0],i)))return-1;Nt(i,a)}return r}function Ot(t,e,i,n){var r=[],s=Mt(1936286840,t=new It(new DataView(t)));if(-1==s)throw new m(3,3004);var a=xt(t);Nt(t,3),Nt(t,4);var o,u,h=At(t);if(!h)throw new m(3,3005);for(a?(o=Ct(t),u=Ct(t)):(o=At(t),u=At(t)),Nt(t,2),a=function(t){try{var e=t.b.getUint16(t.a,t.c)}catch(t){Dt()}return t.a+=2,e}(t),n=o-n,e=e+s+u,s=0;s<a;s++){u=(2147483648&(o=At(t)))>>>31,o&=2147483647;var c=At(t);if(Nt(t,4),1==u)throw new m(3,3006);r.push(new pt(r.length,n/h,(n+c)/h,(function(){return i}),e,e+o-1)),n+=c,e+=o}return r}function jt(t){this.a=t}function Bt(t){this.b=t,this.a=new It(t),pr||(pr=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function Ut(t){var e;if(7<(e=Ft(t)).length)throw new m(3,3002);for(var i=0,n=0;n<e.length;n++)i=256*i+e[n];e=i,i=Ft(t);t:{for(n=0;n<pr.length;n++)if(q(i,pr[n])){n=!0;break t}n=!1}if(n)i=t.b.byteLength-t.a.a;else{if(8==i.length&&224&i[1])throw new m(3,3001);n=i[0]&(1<<8-i.length)-1;for(var r=1;r<i.length;r++)n=256*n+i[r];i=n}return i=t.a.a+i<=t.b.byteLength?i:t.b.byteLength-t.a.a,n=new DataView(t.b.buffer,t.b.byteOffset+t.a.a,i),Nt(t.a,i),new Vt(e,n)}function Ft(t){var e,i=xt(t.a);for(e=1;8>=e&&!(i&1<<8-e);e++);if(8<e)throw new m(3,3002);var n=new Uint8Array(e);for(n[0]=i,i=1;i<e;i++)n[i]=xt(t.a);return n}function Vt(t,e){this.id=t,this.a=e}function Kt(t){if(8<t.a.byteLength)throw new m(3,3002);if(8==t.a.byteLength&&224&t.a.getUint8(0))throw new m(3,3001);for(var e=0,i=0;i<t.a.byteLength;i++)e=256*e+t.a.getUint8(i);return e}function Ht(t){if(179!=(t=Ut(e=new Bt(t.a))).id)throw new m(3,3013);if(t=Kt(t),183!=(e=Ut(e)).id)throw new m(3,3012);for(var e=new Bt(e.a),i=0;_t(e.a);){var n=Ut(e);if(241==n.id){i=Kt(n);break}}return{hd:t,Fc:i}}function qt(t,e){var i=Tt(t,e,"Initialization");if(!i)return null;var n=t.u.N;(r=i.getAttribute("sourceURL"))&&(n=bt(t.u.N,[r]));var r=0,s=null;return(i=Y(i,"range",X))&&(r=i.start,s=i.end),new ft((function(){return n}),r,s)}function Gt(t,e,i,n,r,s,a,o){var u=t.presentationTimeline,h=t.I.start,c=t.I.duration,l=e,d=null;return{createSegmentIndex:function(){var e=[l(n,r,s),"webm"==a?l(i.a(),i.M,i.D):null];return l=null,Promise.all(e).then((function(e){var i,s,l=e[0];if(e=e[1]||null,"mp4"==a)l=Ot(l,r,n,o);else{if(440786851!=Ut(e=new Bt(new DataView(e))).id)throw new m(3,3008);if(408125543!=(s=Ut(e)).id)throw new m(3,3009);for(e=s.a.byteOffset,s=new Bt(s.a),i=null;_t(s.a);){var f=Ut(s);if(357149030==f.id){i=f;break}}if(!i)throw new m(3,3010);for(i=new Bt(i.a),f=1e6,s=null;_t(i.a);){var p=Ut(i);if(2807729==p.id)f=Kt(p);else if(17545==p.id)if(4==(s=p).a.byteLength)s=s.a.getFloat32(0);else{if(8!=s.a.byteLength)throw new m(3,3003);s=s.a.getFloat64(0)}}if(null==s)throw new m(3,3011);if(i=f/=1e9,s*=f,475249515!=(l=Ut(new Bt(new DataView(l)))).id)throw new m(3,3007);l=function(t,e,i,n,r,s){function a(){return r}var o=[];t=new Bt(t.a);for(var u=-1,h=-1;_t(t.a);){var c=Ut(t);if(187==c.id){var l=Ht(c);l&&(c=i*(l.hd-s),l=e+l.Fc,0<=u&&o.push(new pt(o.length,u,c,a,h,l-1)),u=c,h=l)}}return 0<=u&&o.push(new pt(o.length,u,n,a,h,null)),o}(l,e,i,s,n,o)}gt(t.Sa,c,l),u.Ha(h,l),d=new jt(l)}))},findSegmentPosition:function(t){return d.find(t)},getSegmentReference:function(t){return d.get(t)}}}function zt(t){return t.Ia}function Wt(t,e){var i,n=qt(t,Yt);i=function(t){return[t.u.$,t.R.$,t.L.$].filter(D).map((function(t){return z(t,"SegmentURL")})).reduce((function(t,e){return 0<t.length?t:e})).map((function(e){return e.getAttribute("indexRange")&&!t.tb&&(t.tb=!0),{ic:e.getAttribute("media"),start:(e=Y(e,"mediaRange",X,{start:0,end:null})).start,end:e.end}}))}(t);var r=vt(t,Yt),s=r.ja;s||(s=1);var a=0;if(r.G?a=r.G*(s-1):r.w&&0<r.w.length&&(a=r.w[0].start),!(i={G:r.G,startTime:a,ja:s,presentationTimeOffset:r.presentationTimeOffset,w:r.w,wa:i}).G&&!i.w&&1<i.wa.length)throw new m(4,4002);if(!i.G&&!t.I.duration&&!i.w&&1==i.wa.length)throw new m(4,4002);if(i.w&&!i.w.length)throw new m(4,4002);return s=r=null,t.L.id&&t.u.id&&(r=e[s=t.L.id+","+t.u.id]),a=function(t,e,i,n){var r=n.wa.length;n.w&&n.w.length!=n.wa.length&&(r=Math.min(n.w.length,n.wa.length));for(var s=[],a=n.startTime,o=0;o<r;o++){var u,h=n.wa[o],c=bt(i,[h.ic]);u=null!=n.G?a+n.G:n.w?n.w[o].end:a+t,s.push(new pt(o+e,a,u,function(t){return t}.bind(null,c),h.start,h.end)),a=u}return s}(t.I.duration,i.ja,t.u.N,i),gt(t.Sa,t.I.duration,a),r?(r.Za(a),r.Ta(t.presentationTimeline.ua()-t.I.start)):(t.presentationTimeline.Ha(t.I.start,a),r=new jt(a),s&&(e[s]=r)),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:r.find.bind(r),getSegmentReference:r.get.bind(r),initSegmentReference:n,presentationTimeOffset:i.presentationTimeOffset}}function Yt(t){return t.$}function $t(t,e,i,n){var r,s=function(t){var e=yt(t,Jt,"initialization");if(!e)return null;var i=t.u.id,n=t.bandwidth||null,r=t.u.N;return new ft((function(){var t=mt(e,i,null,n,null);return bt(r,[t])}),0,null)}(t);r=vt(t,Jt);var a=yt(t,Jt,"media"),o=yt(t,Jt,"index");if(a=0+((r={G:r.G,timescale:r.timescale,ja:r.ja,presentationTimeOffset:r.presentationTimeOffset,lb:r.lb,w:r.w,Ya:a,Fa:o}).Fa?1:0),a+=r.w?1:0,!(a+=r.G?1:0))throw new m(4,4002);if(1!=a&&(r.Fa&&(r.w=null),r.G=null),!r.Fa&&!r.Ya)throw new m(4,4002);if(r.Fa){if("mp4"!=(i=t.u.mimeType.split("/")[1])&&"webm"!=i)throw new m(4,4006);if("webm"==i&&!s)throw new m(4,4005);n=mt(r.Fa,t.u.id,null,t.bandwidth||null,null),t=Gt(t,e,s,n=bt(t.u.N,[n]),0,null,i,r.presentationTimeOffset)}else r.G?(n||t.presentationTimeline.$a(r.G),t=function(t,e){var i=t.I.duration,n=e.G,r=e.ja,s=e.timescale,a=e.Ya,o=t.bandwidth||null,u=t.u.id,h=t.u.N;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(t){return 0>t||i&&t>=i?null:Math.floor(t/n)},getSegmentReference:function(t){var e=t*n;return 0>e||i&&e>=i?null:new pt(t,e,e+n,(function(){var i=mt(a,u,t+r,o,e*s);return bt(h,[i])}),0,null)}}}(t,r)):(n=e=null,t.L.id&&t.u.id&&(e=i[n=t.L.id+","+t.u.id]),a=function(t,e){for(var i=[],n=0;n<e.w.length;n++){var r=n+e.ja;i.push(new pt(r,e.w[n].start,e.w[n].end,function(t,e,i,n,r,s){return bt(n,[t=mt(t,e,r,i,s)]).map((function(t){return t.toString()}))}.bind(null,e.Ya,t.u.id,t.bandwidth||null,t.u.N,r,e.w[n].gd+e.lb),0,null))}return i}(t,r),gt(t.Sa,t.I.duration,a),e?(e.Za(a),e.Ta(t.presentationTimeline.ua()-t.I.start)):(t.presentationTimeline.Ha(t.I.start,a),e=new jt(a),n&&(i[n]=e)),t={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:e.find.bind(e),getSegmentReference:e.get.bind(e)});return{createSegmentIndex:t.createSegmentIndex,findSegmentPosition:t.findSegmentPosition,getSegmentReference:t.getSegmentReference,initSegmentReference:s,presentationTimeOffset:r.presentationTimeOffset}}function Jt(t){return t.Ja}function Xt(t){this.f=!1,this.a=[],this.b=[],this.c=[],this.h=t||null}function Qt(t,e){return{uris:t,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:e}}function Zt(t,e,i,n){var r=n;return r||1<(n=new rt(t).P.split("/").pop().split(".")).length&&(n=n.pop().toLowerCase(),r=yr[n]),r?Promise.resolve(r):((i=Qt([t],i)).method="HEAD",e.request(0,i).then((function(e){return(e=e.headers["content-type"])&&(e=e.toLowerCase()),(r=vr[e])?r:Promise.reject(new m(4,4e3,t))}),(function(t){return Promise.reject(t)})))}function te(t,e){this.j=t,this.i=e,this.c=this.a=1/0,this.b=1,this.h=this.f=0,this.g=!0}function ee(t,e,i){this.g=Tr[e],this.c=t,this.h=0,this.f=1/0,this.a=this.b=null,this.i=i}function ie(t,e,i){return t>=e?null:new VTTCue(t,e,i)}function ne(t,e){return null==t.a||t.a<e||e<t.b?0:t.a-e}function re(t,e){for(var i=t.c.cues,n=[],r=0;r<i.length;++r)e(i[r])&&n.push(i[r]);for(r=0;r<n.length;++r)t.c.removeCue(n[r])}function se(t,e,i){return i==e||t>=wr&&i==e.split("-")[0]||t>=kr&&i.split("-")[0]==e.split("-")[0]}function ae(t){t=t.toLowerCase().split("-");var e=Er[t[0]];return e&&(t[0]=e),t.join("-")}function oe(t,e,i){for(var n=0;n<t.length;++n)if(i(t[n],e))return n;return-1}function ue(t){this.a=null,this.b=function(){this.a=null,t()}.bind(this)}function he(t,e,i){this.l=this.h=this.s=null,this.B=!1,this.b=null,this.f=new w,this.a=[],this.m=[],this.j=new g,this.H=t,this.i=null,this.g=function(t){this.j.reject(t),e(t)}.bind(this),this.A={},this.K=i,this.v=new ue(this.Dc.bind(this)),this.C=this.c=!1,this.j.catch((function(){}))}function ce(t,e){if(!t.h)return k(t.f,e,"encrypted",function(){this.f.la(e,"encrypted"),this.g(new m(6,6010))}.bind(t)),Promise.resolve();t.l=e;var i=(i=t.l.setMediaKeys(t.h)).catch((function(t){return Promise.reject(new m(6,6003,t.message))})),n=null;return t.b.serverCertificate&&(n=(n=t.h.setServerCertificate(t.b.serverCertificate)).catch((function(t){return Promise.reject(new m(6,6004,t.message))}))),Promise.all([i,n]).then(function(){return this.c?Promise.reject():(le(this),void(this.b.initData.length||this.m.length||k(this.f,this.l,"encrypted",this.jc.bind(this))))}.bind(t)).catch(function(t){return this.c?Promise.resolve():Promise.reject(t)}.bind(t))}function le(t){var e=t.b?t.b.initData:[];return e.forEach(function(t){me(this,t.initDataType,t.initData)}.bind(t)),t.m.forEach(function(t){pe(this,t)}.bind(t)),e.length||t.m.length||t.j.resolve(),t.j}function de(t,e,i){if(1==i.length&&""==i[0])return Promise.reject(new m(6,6e3));var n=new g,r=n;return[!0,!1].forEach(function(t){i.forEach(function(i){var n=e[i];n.drmInfos.some((function(t){return!!t.licenseServerUri}))==t&&(n.audioCapabilities.length||delete n.audioCapabilities,n.videoCapabilities.length||delete n.videoCapabilities,r=r.catch(function(){return this.c?Promise.reject():navigator.requestMediaKeySystemAccess(i,[n])}.bind(this)))}.bind(this))}.bind(t)),r=(r=r.catch((function(){return Promise.reject(new m(6,6001))}))).then(function(t){if(this.c)return Promise.reject();var i=0<=navigator.userAgent.indexOf("Edge/"),n=t.getConfiguration();return this.s=(n.audioCapabilities||[]).concat(n.videoCapabilities||[]).map((function(t){return t.contentType})),i&&(this.s=null),i=e[t.keySystem],function(t,e,i,n){var r=[],s=[],a=[],o=[];(function(t,e,i,n,r){function s(t,e){return t.initDataType==e.initDataType&&q(t.initData,e.initData)}t.forEach((function(t){if(-1==e.indexOf(t.licenseServerUri)&&e.push(t.licenseServerUri),t.serverCertificate&&-1==oe(i,t.serverCertificate,q)&&i.push(t.serverCertificate),t.initData&&t.initData.forEach((function(t){-1==oe(n,t,s)&&n.push(t)})),t.keyIds)for(var a=0;a<t.keyIds.length;++a)-1==r.indexOf(t.keyIds[a])&&r.push(t.keyIds[a])}))})(n,r,s,a,o),t.b={keySystem:e,licenseServerUri:r[0],distinctiveIdentifierRequired:"required"==i.distinctiveIdentifier,persistentStateRequired:"required"==i.persistentState,audioRobustness:i.audioCapabilities?i.audioCapabilities[0].robustness:"",videoRobustness:i.videoCapabilities?i.videoCapabilities[0].robustness:"",serverCertificate:s[0],initData:a,keyIds:o}}(this,t.keySystem,i,i.drmInfos),this.b.licenseServerUri?t.createMediaKeys():Promise.reject(new m(6,6012))}.bind(t)).then(function(t){return this.c?Promise.reject():(this.h=t,void(this.B=!0))}.bind(t)).catch(function(t){return this.c?Promise.resolve():(this.s=this.b=null,t instanceof m?Promise.reject(t):Promise.reject(new m(6,6002,t.message)))}.bind(t)),n.reject(),r}function fe(e){if(O(e.i.clearKeys))return null;var i,n=[],r=[];for(i in e.i.clearKeys){var s=e.i.clearKeys[i],a=K(i);s=K(s),a={kty:"oct",kid:F(a),k:F(s)};n.push(a),r.push(a.kid)}return e=JSON.stringify({keys:n}),r=JSON.stringify({kids:r}),r=[{initData:new Uint8Array(Et(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+t.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:r,keyIds:[]}}function pe(t,e){var i;try{i=t.h.createSession("persistent-license")}catch(e){var n=new m(6,6005,e.message);return t.g(n),Promise.reject(n)}k(t.f,i,"message",t.Bb.bind(t)),k(t.f,i,"keystatuseschange",t.wb.bind(t));var r={initData:null,ha:i,loaded:!1,Oa:null};return t.a.push(r),i.load(e).then(function(t){if(!this.c){if(t)return r.loaded=!0,this.a.every((function(t){return t.loaded}))&&this.j.resolve(),i;this.a.splice(this.a.indexOf(r),1),this.g(new m(6,6013))}}.bind(t),function(t){this.c||(this.a.splice(this.a.indexOf(r),1),this.g(new m(6,6005,t.message)))}.bind(t))}function me(t,e,i){var n;try{n=t.C?t.h.createSession("persistent-license"):t.h.createSession()}catch(e){return void t.g(new m(6,6005,e.message))}k(t.f,n,"message",t.Bb.bind(t)),k(t.f,n,"keystatuseschange",t.wb.bind(t)),t.a.push({initData:i,ha:n,loaded:!1,Oa:null}),n.generateRequest(e,i.buffer).catch(function(t){if(!this.c){for(var e=0;e<this.a.length;++e)if(this.a[e].ha==n){this.a.splice(e,1);break}this.g(new m(6,6006,t.message))}}.bind(t))}function ge(t){return!t||1==t.length&&1e-6>t.end(0)-t.start(0)?null:t.length?t.end(t.length-1):null}function be(t,e){var i=0;if(!t||1==t.length&&1e-6>t.end(0)-t.start(0))return i;var n=!1,r=1e-4;e||(r=.25);for(var s=0;s<t.length;++s)if(e+r>=t.start(s)&&e<t.end(s))i+=t.end(s)-e,n=!0;else if(n&&.04>=t.start(s)-t.end(s-1))i+=t.end(s)-t.start(s),i+=t.start(s)-t.end(s-1);else if(0<s&&e+r<t.start(s)&&e+r>=t.end(s-1)){if(!(.04>=t.start(s)-e))break;i+=t.end(s)-e,n=!0}else n=!1;return i}function ve(t,e,i){var n=be(t,e);return n||(n=be(t,e+i))&&(n+=i),n}function ye(t,e,i){this.f=t,this.F=e,this.i=i,this.c={},this.b=null,this.a={},this.g=new w,this.h=!1}function Te(t,e){var i;return"text"==e?i=t.b.b:i=!(i=ke(t,e))||1==i.length&&1e-6>i.end(0)-i.start(0)?null:1==i.length&&0>i.start(0)?0:i.length?i.start(0):null,i}function we(t,e,i,n){return"text"==e?!(e=ne(t.b,i))&&n&&(e=ne(t.b,i+n))&&(e+=n):e=ve(t=ke(t,e),i,n||0),e}function ke(t,e){try{return t.c[e].buffered}catch(t){return null}}function Ee(t,e,i,n,r){return"text"==e?function(t,e,i,n){var r=t.h;return Promise.resolve().then(function(){if(this.c){var t=this.g(e,r,i,n,this.i);if(null!=i&&null!=n){for(var s=0;s<t.length&&!(t[s].startTime>=this.f);++s)this.c.addCue(t[s]);null==this.b&&(this.b=i),this.a=Math.min(n,this.f)}}}.bind(t))}(t.b,i,n,r):Se(t,e,t.Zc.bind(t,e,i))}function Se(t,e,i){if(t.h)return Promise.reject();if(i={start:i,p:new g},t.a[e].push(i),1==t.a[e].length)try{i.start()}catch(n){"QuotaExceededError"==n.name?i.p.reject(new m(3,3017,e)):i.p.reject(new m(3,3015,n)),_e(t,e)}return i.p}function Ie(t,e){if(t.h)return Promise.reject();var i,n=[];for(i in t.c){var r=new g,s={start:function(t){t.resolve()}.bind(null,r),p:r};t.a[i].push(s),n.push(r),1==t.a[i].length&&s.start()}return Promise.all(n).then(function(){var t,i;try{e()}catch(t){i=Promise.reject(new m(3,3015,t))}for(t in this.c)_e(this,t);return i}.bind(t),function(){return Promise.reject()}.bind(t))}function _e(t,e){t.a[e].shift();var i=t.a[e][0];if(i)try{i.start()}catch(n){i.p.reject(new m(3,3015,n)),_e(t,e)}}function xe(t,e,i){var n=!1;return t.streamSets.forEach((function(t){t.streams.forEach((function(r){var s=r.allowedByApplication;r.allowedByApplication=!0,"video"==t.type?(r.width<e.minWidth||r.width>e.maxWidth||r.width>i.width||r.height<e.minHeight||r.height>e.maxHeight||r.height>i.height||r.width*r.height<e.minPixels||r.width*r.height>e.maxPixels||r.bandwidth<e.minVideoBandwidth||r.bandwidth>e.maxVideoBandwidth)&&(r.allowedByApplication=!1):"audio"==t.type&&(r.bandwidth<e.minAudioBandwidth||r.bandwidth>e.maxAudioBandwidth)&&(r.allowedByApplication=!1),s!=r.allowedByApplication&&(n=!0)}))})),n}function Ae(t,e,i){var n="",r=null;for(t&&t.B&&(n=t.keySystem(),r=t.s),t=0;t<i.streamSets.length;++t){var s=i.streamSets[t];if(n&&s.drmInfos.length&&!s.drmInfos.some((function(t){return t.keySystem==n})))i.streamSets.splice(t,1),--t;else{for(var a=e[s.type],o=0;o<s.streams.length;++o){var u=s.streams[o],h=Me(u.mimeType,u.codecs);Tr[h]||MediaSource.isTypeSupported(h)?r&&u.encrypted&&0>r.indexOf(h)?(s.streams.splice(o,1),--o):!a||u.mimeType==a.mimeType&&u.codecs.split(".")[0]==a.codecs.split(".")[0]||(s.streams.splice(o,1),--o):(s.streams.splice(o,1),--o)}s.streams.length||(i.streamSets.splice(t,1),--t)}}}function Ce(t,e){return t.streamSets.map((function(t){var i=e?e[t.type]:null;return t.streams.filter((function(t){return t.allowedByApplication&&t.allowedByKeySystem})).map((function(e){return{id:e.id,active:i==e,type:t.type,bandwidth:e.bandwidth,language:t.language,kind:e.kind||null,width:e.width||null,height:e.height||null,frameRate:e.frameRate||void 0,codecs:e.codecs||null}}))})).reduce(N,[])}function Pe(t,e){for(var i=0;i<t.streamSets.length;i++)for(var n=t.streamSets[i],r=0;r<n.streams.length;r++){var s=n.streams[r];if(s.id==e.id)return{stream:s,bd:n}}return null}function Ne(t){return t.streams.some((function(t){return t.allowedByApplication&&t.allowedByKeySystem}))}function Re(t,e,i){var n={};t.streamSets.forEach((function(t){!Ne(t)||t.type in n||(n[t.type]=t)}));var r=0;return t.streamSets.forEach((function(t){if(Ne(t)&&"video"==t.type){var e=function(t){var e=0;return t?(t.streams.forEach((function(t){t.height>e&&(e=t.height)})),e):e}(t);e>r?(r=e,n.video=t):e==r&&De(t)<De(n.video)&&(n.video=t)}})),t.streamSets.forEach((function(t){Ne(t)&&t.primary&&(n[t.type].primary?De(t)<De(n[t.type])&&(n[t.type]=t):n[t.type]=t)})),[kr,wr,0].forEach((function(r){t.streamSets.forEach((function(t){var s;if(Ne(t)&&("audio"==t.type?s=e.preferredAudioLanguage:"text"==t.type&&(s=e.preferredTextLanguage),s)){s=ae(s);var a=ae(t.language);se(r,s,a)&&(t.language==n[t.type].language?De(t)<De(n[t.type])&&(n[t.type]=t):n[t.type]=t,i&&(i[t.type]=!0))}}))})),n}function De(t){var e=0;return!t||1>t.streams.length?e:(t.streams.forEach((function(t){e+=t.bandwidth})),e/t.streams.length)}function Me(t,e){var i=t;return e&&(i+='; codecs="'+e+'"'),i}function Le(){this.m=this.l=this.j=this.c=this.a=null,this.g=[],this.b=null,this.h=[],this.v=1,this.i={},this.s=0,this.f=null,this.La=this.La.bind(this)}function Oe(t){return t.a.request(0,Qt(t.g,t.c.retryParameters)).then(function(t){if(this.a)return function(t,e,i){var n=wt(e),r=new DOMParser,s=null;e=null;try{s=r.parseFromString(n,"text/xml")}catch(t){}if(s&&"MPD"==s.documentElement.tagName&&(e=s.documentElement),!e)throw new m(4,4001);i=[i],0<(n=z(e,"Location").map(W).filter(D)).length&&(i=t.g=n),n=z(e,"BaseURL").map(W),i=bt(i,n);var a=Y(e,"minBufferTime",J);t.s=Y(e,"minimumUpdatePeriod",J,-1);var o,u=Y(e,"availabilityStartTime",$),h=(n=Y(e,"timeShiftBufferDepth",J),Y(e,"suggestedPresentationDelay",J));r=Y(e,"maxSegmentDuration",J),s=e.getAttribute("type")||"static";if(t.b)o=t.b.presentationTimeline;else{var c=Math.max(10,1.5*a);o=new te(u,null!=h?h:c)}h=(u=function(t,e,i,n){var r=Y(n,"mediaPresentationDuration",J),s=!1,a=[],o=0;n=z(n,"Period");for(var u=0;u<n.length;u++){var h=n[u],c=(o=Y(h,"start",J,o),Y(h,"duration",J));if(null==c)if(u+1!=n.length){var l=Y(n[u+1],"start",J);null!=l&&(c=l-o)}else null!=r&&(c=r-o);if(h=je(t,e,i,l={start:o,duration:c,node:h,ca:!1}),a.push(h),s=s||l.ca,l=e.L.id,t.h.every(M(l))&&(t.j(h),t.h.push(l),t.b&&t.b.periods.push(h)),null==c){o=null;break}o+=c}return null!=r?{periods:a,duration:r,ca:s}:{periods:a,duration:o,ca:s}}(t,{Sa:"static"!=s,presentationTimeline:o,L:null,I:null,R:null,u:null,bandwidth:void 0,tb:!1},i,e)).duration;var l=u.periods;return o.Mb("static"==s),o.Aa(h||1/0),o.Lb(null!=n?n:1/0),o.$a(r||1),t.b?Promise.resolve():(e=z(e,"UTCTiming"),n=o.S(),u.ca&&t.a.Eb(t.La),function(t,e,i,n){i=i.map((function(t){return{scheme:t.getAttribute("schemeIdUri"),value:t.getAttribute("value")}}));var r=t.c.dash.clockSyncUri;return n&&!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),function(t,e){return t.reduce(function(t,e,i){return e.catch(t.bind(null,i))}.bind(null,e),Promise.reject())}(i,function(t){var i=t.value;switch(t.scheme){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Fe(this,e,i,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Fe(this,e,i,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return t=Date.parse(i),isNaN(t)?0:t-Date.now();default:return Promise.reject()}}.bind(t)).catch((function(){return 0}))}(t,i,e,n).then(function(t){this.a&&(o.Kb(t),this.b={presentationTimeline:o,periods:l,offlineSessionIds:[],minBufferTime:a||0})}.bind(t)))}(this,t.data,t.uri)}.bind(t))}function je(t,e,i,n){if(e.L=Ue(n.node,null,i),e.I=n,e.L.id||(e.L.id="__shaka_period_"+n.start),i=(e=(t=z(n.node,"AdaptationSet").map(t.zc.bind(t,e)).filter(D)).map((function(t){return t.Hc})).reduce(N,[])).filter(L),e.length!=i.length)throw new m(4,4018);if(!t.length)throw new m(4,4004);for(e=0;e<t.length;e++)t[e].ca&&(n.ca=!0);return t=function(t){var e={};t.forEach((function(t){e[t.id]=[t]})),t.forEach((function(t){var i=e[t.id];t.dd.forEach((function(t){(t=e[t])&&t!=i&&(i.push.apply(i,t),t.forEach((function(t){e[t.id]=i})))}))}));var i=[],n=[];return j(e).forEach((function(t){if(!(0<=n.indexOf(t))){n.push(t);var e=new T;t.forEach((function(t){e.push(t.contentType||"",t)})),e.keys().forEach((function(t){var n=new T;e.get(t).forEach((function(t){n.push(t.language,t)})),n.keys().forEach((function(e){var r=n.get(e);e={language:e,type:t,primary:r.some((function(t){return t.hc})),drmInfos:r.map((function(t){return t.drmInfos})).reduce(N,[]),streams:r.map((function(t){return t.streams})).reduce(N,[])},i.push(e)}))}))}})),i}(t),{startTime:n.start,streamSets:t}}function Be(e,i){0>e.s||(e.f=t.setTimeout(e.Yc.bind(e),1e3*Math.max(Math.max(3,e.s)-i,0)))}function Ue(t,e,i){e=e||{contentType:"",mimeType:"",codecs:"",frameRate:void 0},i=i||e.N;var n=z(t,"BaseURL").map(W),r=t.getAttribute("contentType")||e.contentType,s=t.getAttribute("mimeType")||e.mimeType,a=t.getAttribute("codecs")||e.codecs,o=Y(t,"frameRate",et)||e.frameRate;return r||(r=Ve(s,a)),{N:bt(i,n),Ia:G(t,"SegmentBase")||e.Ia,$:G(t,"SegmentList")||e.$,Ja:G(t,"SegmentTemplate")||e.Ja,width:Y(t,"width",tt)||e.width,height:Y(t,"height",tt)||e.height,contentType:r,mimeType:s,codecs:a,frameRate:o,id:t.getAttribute("id")}}function Fe(t,e,i,n){return(e=Qt(e=bt(e,[i]),t.c.retryParameters)).method=n,t.a.request(0,e).then((function(t){if("HEAD"==n){if(!t.headers||!t.headers.date)return 0;t=t.headers.date}else t=wt(t.data);return t=Date.parse(t),isNaN(t)?0:t-Date.now()}))}function Ve(t,e){return Tr[Me(t,e)]?"text":t.split("/")[0]}function Ke(t,e){var i=wt(t),n=[],r=new DOMParser,s=null;try{s=r.parseFromString(i,"text/xml")}catch(t){throw new m(2,2005)}if(s){var a,o,u;if(!(r=s.getElementsByTagName("tt")[0]))throw new m(2,2006);if(s=r.getAttribute("ttp:frameRate"),a=r.getAttribute("ttp:subFrameRate"),o=r.getAttribute("ttp:frameRateMultiplier"),u=r.getAttribute("ttp:tickRate"),"default"!=(i=r.getAttribute("xml:space")||"default")&&"preserve"!=i)throw new m(2,2005);for(i="default"==i,s=new He(s,a,o,u),a=Ke.b(r.getElementsByTagName("styling")[0]),o=Ke.b(r.getElementsByTagName("layout")[0]),r=Ke.b(r.getElementsByTagName("body")[0]),u=0;u<r.length;u++){var h=Ke.c(r[u],e,s,a,o,i);h&&n.push(h)}}return n}function He(t,e,i,n){this.frameRate=Number(t)||30,this.b=Number(e)||1,this.a=Number(n),this.a||(this.a=t?this.frameRate*this.b:1),i&&(t=/^(\d+) (\d+)$/g.exec(i))&&(this.frameRate*=t[1]/t[2])}function qe(t,e){var i=new It(new DataView(t)),n=Mt(1835295092,i);if(-1!=n)return Ke(Pt(i,n-8).buffer,e);if(-1!=Lt(t,qe.U))return[];throw new m(2,2007)}function Ge(t){this.b=t,this.a=0}function ze(t,e){var i;return e.lastIndex=t.a,i=(i=e.exec(t.b))?{position:i.index,length:i[0].length,Kc:i}:null,t.a!=t.b.length&&i&&i.position==t.a?(t.a+=i.length,i.Kc):null}function We(t){return t.a==t.b.length?null:(t=ze(t,/[^ \t\n]*/gm))?t[0]:null}function Ye(t,e,i,n,r){if(t=(t=(t=wt(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(t[0]))throw new m(2,2e3);n=[];for(var s=1;s<t.length;s++){var a=t[s].split("\n");(a=Ye.c(a,e,i,r))&&n.push(a)}return n}function $e(t,e,i,n){var r=new It(new DataView(t)),s=Mt(1835295092,r);if(-1!=s)return $e.Ba(Pt(r,s-8).buffer,e,i,n);if(-1!=Lt(t,$e.pa))return[];throw new m(2,2008)}function Je(t,e,i,n,r,s){this.a=t,this.c=e,this.j=i,this.s=n,this.l=r,this.m=s,this.b=new w,this.g=!1,this.h=1,this.i=this.f=null,0<t.readyState?this.xb():k(this.b,t,"loadedmetadata",this.xb.bind(this)),k(this.b,t,"ratechange",this.qc.bind(this)),ti(this)}function Xe(t){return 0<t.a.readyState?si(t,t.a.currentTime):Qe(t)}function Qe(t){return t.s?si(t,t.s):1/0>t.c.ea()?t.c.ta():Math.max(t.c.Va(),t.c.ta())}function Ze(t,e){e!=t.g&&(t.g=e,ii(t,t.h),t.l(e))}function ti(e){ei(e),e.i=t.setTimeout(e.uc.bind(e),250)}function ei(e){e.i&&(t.clearTimeout(e.i),e.i=null)}function ii(e,i){null!=e.f&&(t.clearInterval(e.f),e.f=null),e.h=i,e.a.playbackRate=e.g||0>i?0:i,!e.g&&0>i&&(e.f=t.setInterval(function(){this.a.currentTime+=i/4}.bind(e),250))}function ni(t,e){var i=t.c,n=i.ta(),r=i.Z();return i.S()&&1/0!=i.c?e>=(n=(i=n+1)+t.j)&&e<=r||be(t.a.buffered,e)&&e>=i&&e<=r?e:e>r?r:r<n&&e>=i&&e<=r?e:Math.min(n+2,r):e<n?n:e>r?r:e}function ri(t,e,i){t.a.currentTime=i;var n=0,r=function(){!this.a||10<=n++||this.a.currentTime!=e||(this.a.currentTime=i,setTimeout(r,100))}.bind(t);setTimeout(r,100)}function si(t,e){var i=t.c.ta();return e<i?i:e>(i=t.c.Z())?i:e}function ai(t,e,i,n,r,s,a,o,u){this.m=t,this.f=e,this.U=i,this.a=n,this.H=r,this.v=s,this.j=a,this.A=o||null,this.B=u||null,this.g=null,this.i=1,this.C=Promise.resolve(),this.h=[],this.l={},this.b={},this.c=this.s=this.K=!1}function oi(t){return t.a.periods[bi(t,Xe(t.m))]}function ui(t){return B(t.b,(function(t){return t.stream}))}function hi(t,e){var i={};return i.text=e,li(t,i)}function ci(t,e,i,n){var r=t.b[e];!r&&"text"==e&&t.g.ignoreTextStreamFailures?hi(t,i):r&&(e=t.h[vi(t,i)])&&e.za&&(e=t.l[i.id])&&e.za&&r.stream!=i&&(r.stream=i,r.Ma=!0,n&&(r.ba?r.Qa=!0:r.ga?(r.na=!0,r.Qa=!0):(ki(r),Ti(t,r,!0))))}function li(t,e,i){var n=bi(t,Xe(t.m)),r=B(e,(function(t){return Me(t.mimeType,t.codecs)}));return t.f.init(r,t.g.useRelativeCueTimestamps),function(t){var e=t.a.presentationTimeline.ea();1/0>e?t.f.Aa(e):t.f.Aa(Math.pow(2,32))}(t),fi(t,r=j(e)).then(function(){if(!this.c)for(var t in e){var r=e[t];this.b[t]||(this.b[t]={stream:r,type:t,va:null,W:null,Ma:!0,Ga:n,endOfStream:!1,ga:!1,aa:null,na:!1,Qa:!1,ba:!1,eb:!1,Xa:!1,Hb:i||0},wi(this,this.b[t],0))}}.bind(t))}function di(t,e){var i=t.h[e];if(i)return i.J;i={J:new g,za:!1},t.h[e]=i;var n=t.a.periods[e].streamSets.map((function(t){return t.streams})).reduce(N,[]);return t.C=t.C.then(function(){if(!this.c)return fi(this,n)}.bind(t)).then(function(){this.c||(this.h[e].J.resolve(),this.h[e].za=!0)}.bind(t)).catch(function(t){this.c||(this.h[e].J.reject(),delete this.h[e],this.j(t))}.bind(t)),i.J}function fi(t,e){for(var i=[],n=0;n<e.length;++n){var r=e[n],s=t.l[r.id];s?i.push(s.J):(t.l[r.id]={J:new g,za:!1},i.push(r.createSegmentIndex()))}return Promise.all(i).then(function(){if(!this.c)for(var t=0;t<e.length;++t){var i=this.l[e[t].id];i.za||(i.J.resolve(),i.za=!0)}}.bind(t)).catch(function(t){if(!this.c)return this.l[r.id].J.reject(),delete this.l[r.id],Promise.reject(t)}.bind(t))}function pi(t,e){var i,n=Xe(t.m),r=t.f;i="text"==(i=e.type)?r.b.a:ge(ke(r,i));var s=e.va&&e.W?t.a.periods[vi(t,e.va)].startTime+e.W.endTime:Math.max(n,e.Hb);e.Hb=0;r=vi(t,e.stream);var a=bi(t,s),o=we(t.f,e.type,n,.1),u=Math.max(t.i*Math.max(t.a.minBufferTime||0,t.g.rebufferingGoal),t.i*t.g.bufferingGoal);return s>=t.a.presentationTimeline.ea()?(e.endOfStream=!0,null):(e.endOfStream=!1,e.Ga=a,a!=r?null:o>=u?.5:(e.W&&e.stream==e.va?i=mi(t,e,r,s=e.W.position+1):null==(s=e.W?e.stream.findSegmentPosition(Math.max(0,t.a.periods[vi(t,e.va)].startTime+e.W.endTime-t.a.periods[r].startTime)):e.stream.findSegmentPosition(Math.max(0,(i||n)-t.a.periods[r].startTime)))?i=null:(a=null,null==i&&(a=mi(t,e,r,Math.max(0,s-1))),i=a||mi(t,e,r,s)),i?(function(t,e,i,n,r){var s=t.a.periods[n],a=e.stream,o=t.a.periods[n+1],u=null;u=o?o.startTime:t.a.presentationTimeline.ea();n=function(t,e,i,n){return e.Ma?(i=function(t,e,i){return"text"==e?(t.b.h=i,Promise.resolve()):Se(t,e,t.Pc.bind(t,e,i))}(t.f,e.type,t.a.periods[i].startTime-e.stream.presentationTimeOffset),n=null!=n?function(t,e,i){return"text"==e?(t.b.f=i,Promise.resolve()):Promise.all([Se(t,e,t.Pb.bind(t,e)),Se(t,e,t.Nc.bind(t,e,i))])}(t.f,e.type,n):Promise.resolve(),e.stream.initSegmentReference?(t=yi(t,e.stream.initSegmentReference).then(function(t){if(!this.c)return Ee(this.f,e.type,t,null,null)}.bind(t)).catch((function(t){return e.Ma=!0,Promise.reject(t)})),Promise.all([i,n,t])):Promise.all([i,n])):Promise.resolve()}(t,e,n,u),e.ga=!0,e.Ma=!1,o=yi(t,r),Promise.all([n,o]).then(function(t){if(!this.c&&!this.s)return function(t,e,i,n,r,s,a){return function(t,e,i){var n=Te(t.f,e.type);return null==n||0>=(i=i-n-t.g.bufferBehind)?Promise.resolve():t.f.remove(e.type,n,n+i).then(function(){}.bind(t))}(t,e,i).then(function(){if(!this.c)return Ee(this.f,e.type,a,s.startTime+n.startTime,s.endTime+n.startTime)}.bind(t)).then(function(){if(!this.c)return e.va=r,e.W=s,Promise.resolve()}.bind(t))}(this,e,i,s,a,r,t[1])}.bind(t)).then(function(){this.c||this.s||(e.ga=!1,e.eb=!1,wi(this,e,0),function(t,e){if(!t.K&&(t.K=j(t.b).every((function(t){return"text"==t.type||!t.na&&!t.ba&&t.W})),t.K)){var i=vi(t,e);for(t.h[i]||di(t,i).then(function(){this.v()}.bind(t)).catch(R),i=0;i<t.a.periods.length;++i)di(t,i).catch(R);t.B&&t.B()}}(this,a))}.bind(t)).catch(function(t){this.c||this.s||(e.ga=!1,1001==t.code||1002==t.code||1003==t.code?"text"==e.type&&this.g.ignoreTextStreamFailures&&1001==t.code?delete this.b.text:(this.j(t),wi(this,e,4)):3017==t.code?function(t,e,i){if(!j(t.b).some((function(t){return t!=e&&t.eb}))){var n=Math.round(100*t.i);if(20<n)t.i-=.2;else{if(!(4<n))return e.Xa=!0,t.s=!0,void t.j(i);t.i-=.04}e.eb=!0}wi(t,e,4)}(this,e,t):"text"==e.type&&this.g.ignoreTextStreamFailures?delete this.b.text:(e.Xa=!0,this.j(t)))}.bind(t))}(t,e,n,r,i),null):1))}function mi(t,e,i,n){return i=t.a.periods[i],(e=e.stream.getSegmentReference(n))?(n=(t=t.a.presentationTimeline).Z(),i.startTime+e.endTime<t.ua()||i.startTime+e.startTime>n?null:e):null}function gi(t){return!t.ga&&null==t.aa&&!t.na&&!t.ba}function bi(t,e){for(var i=t.a.periods.length-1;0<i;--i)if(e>=t.a.periods[i].startTime)return i;return 0}function vi(t,e){for(var i=0;i<t.a.periods.length;++i)for(var n=t.a.periods[i],r=0;r<n.streamSets.length;++r)if(0<=n.streamSets[r].streams.indexOf(e))return i;return-1}function yi(t,e){var i=Qt(e.a(),t.g.retryParameters);if(e.M||null!=e.D){var n="bytes="+e.M+"-";null!=e.D&&(n+=e.D),i.headers.Range=n}return t.U.request(1,i).then((function(t){return t.data}))}function Ti(t,e,i){e.na=!1,e.Qa=!1,e.ba=!0,function(t,e){return"text"==e?t.b.remove(0,1/0):Se(t,e,t.Gb.bind(t,e,0,t.F.duration))}(t.f,e.type).then(function(){if(!this.c&&i){var t=this.f,n=e.type;return"text"==n?Promise.resolve():Se(t,n,t.Yb.bind(t,n))}}.bind(t)).then(function(){this.c||(e.va=null,e.W=null,e.ba=!1,wi(this,e,0))}.bind(t))}function wi(e,i,n){i.aa=t.setTimeout(e.Y.bind(e,i),1e3*n)}function ki(e){null!=e.aa&&(t.clearTimeout(e.aa),e.aa=null)}function Ei(e){return new Promise((function(i){if(2>(r=e.split(":")).length||"data"!=r[0])throw new m(1,1004,e);if(2>(r=r.slice(1).join(":").split(",")).length)throw new m(1,1004,e);var n=r[0],r=t.decodeURIComponent(r.slice(1).join(",")),s=null;if(1<(n=n.split(";")).length&&(s=n[1]),"base64"==s)r=V(r).buffer;else{if(s)throw new m(1,1005,e);r=Et(r)}i({uri:e,data:r,headers:{"content-type":n[0]}})}))}function Si(t,e){return new Promise((function(i,n){var r=new XMLHttpRequest;for(var s in r.open(e.method,t,!0),r.responseType="arraybuffer",r.timeout=e.retryParameters.timeout,r.withCredentials=e.allowCrossSiteCredentials,r.onload=function(e){var r=(e=e.target).getAllResponseHeaders().split("\r\n").reduce((function(t,e){var i=e.split(": ");return t[i[0].toLowerCase()]=i.slice(1).join(": "),t}),{});if(200<=e.status&&299>=e.status&&202!=e.status)e.responseURL&&(t=e.responseURL),i({uri:t,data:e.response,headers:r,pd:!!r["x-shaka-from-cache"]});else{var s=null;try{s=function(t){var e=new Uint8Array(t);if(239==e[0]&&187==e[1]&&191==e[2])return wt(e);if(254==e[0]&&255==e[1])return kt(e.subarray(2),!1);if(255==e[0]&&254==e[1])return kt(e.subarray(2),!0);var i=function(t,e){return t.byteLength<=e||32<=t[e]&&126>=t[e]}.bind(null,e);if(!e[0]&&!e[2])return kt(t,!1);if(!e[1]&&!e[3])return kt(t,!0);if(i(0)&&i(1)&&i(2)&&i(3))return wt(t);throw new m(2,2003)}(e.response)}catch(t){}n(new m(1,1001,t,e.status,s,r))}},r.onerror=function(){n(new m(1,1002,t))},r.ontimeout=function(){n(new m(1,1003,t))},e.headers)r.setRequestHeader(s,e.headers[s]);r.send(e.body)}))}function Ii(){this.a=null,this.c=[],this.b={}}function _i(t,e,i){return xi(t,e,"readwrite",(function(t){return t.put(i)}))}function xi(t,e,i,n,r){var s=n((i=t.a.transaction([e],i)).objectStore(e)),a=new g;r&&(s.onsuccess=function(t){r(t.target.result)}),s.onerror=Ai.bind(null,s,a);var o={transaction:i,J:a};t.c.push(o);var u=function(){this.c.splice(this.c.indexOf(o),1)}.bind(t);return i.oncomplete=function(){u(),a.resolve(s.result)},i.onerror=function(t){u(),Ai(s,a,t)},a}function Ai(t,e,i){"AbortError"==t.error.name?e.reject(new m(9,9002)):e.reject(new m(9,9001,t.error)),i.preventDefault()}function Ci(t){return{offlineUri:"offline:"+t.key,originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,tracks:t.periods[0].streams.map((function(t){return{id:t.id,active:!1,type:t.contentType,bandwidth:0,language:t.language,kind:t.kind||null,width:t.width,height:t.height,frameRate:t.frameRate,codecs:t.codecs}})),appMetadata:t.appMetadata}}function Pi(t,e,i){this.b={},this.i=i,this.m=t,this.l=e,this.j=this.a=null,this.f=this.g=this.h=this.c=0}function Ni(t,e,i,n,r){t.b[e]=t.b[e]||[],t.b[e].push({uris:i.a(),M:i.M,D:i.D,mb:n,Ea:r})}function Ri(t,e){t.c=0,t.h=0,t.g=0,t.f=0,j(t.b).forEach(function(t){t.forEach(function(t){null!=t.D?this.c+=t.D-t.M+1:this.g+=t.mb}.bind(this))}.bind(t)),t.a=e,t.a.size=t.c;var i=j(t.b).map(function(t){var e=0,i=function(){return this.i?e>=t.length?Promise.resolve():function(t,e){var i,n=Qt(e.uris,t.l);return(e.M||null!=e.D)&&(n.headers.Range="bytes="+e.M+"-"+(null==e.D?"":e.D)),t.m.request(1,n).then(function(t){return this.a?(i=t.data.byteLength,e.Ea(t.data)):Promise.reject(new m(9,9002))}.bind(t)).then(function(){if(!this.a)return Promise.reject(new m(9,9002));null==e.D?(this.a.size+=i,this.f+=e.mb):this.h+=i;var t=(this.h+this.f)/(this.c+this.g),n=Ci(this.a);this.i.progressCallback(n,t)}.bind(t))}(this,t[e++]).then(i):Promise.reject(new m(9,9002))}.bind(this);return i()}.bind(t));return t.b={},t.j=Promise.all(i)}function Di(){}function Mi(t){var e=new te(null,0);e.Aa(t.duration);var i=t.drmInfo?[t.drmInfo]:[];return{presentationTimeline:e,minBufferTime:10,offlineSessionIds:t.sessionIds,periods:t.periods.map((function(t){return{startTime:t.startTime,streamSets:t.streams.map((function(n){var r=n.segments.map((function(t,e){return new pt(e,t.startTime,t.endTime,(function(){return[t.uri]}),0,null)}));return e.Ha(t.startTime,r),r=new jt(r),{language:n.language,type:n.contentType,primary:n.primary,drmInfos:i,streams:[{id:n.id,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:r.find.bind(r),getSegmentReference:r.get.bind(r),initSegmentReference:n.initSegmentUri?new ft((function(){return[n.initSegmentUri]}),0,null):null,presentationTimeOffset:n.presentationTimeOffset,mimeType:n.mimeType,codecs:n.codecs,bandwidth:0,width:n.width||void 0,height:n.height||void 0,kind:n.kind,encrypted:n.encrypted,keyId:n.keyId,allowedByApplication:!0,allowedByKeySystem:!0}]}}))}}))}}function Li(t){if(/^offline:([0-9]+)$/.exec(t)){var e={uri:t,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}};return Promise.resolve(e)}if(e=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(t)){var i=Number(e[1]),n=new Ii;return n.init(Sr).then((function(){return n.get("segment",i)})).then((function(e){return n.o().then((function(){if(!e)throw new m(9,9003,i);return{uri:t,data:e.data,headers:{}}}))}))}return Promise.reject(new m(1,9004,t))}function Oi(){this.a=Promise.resolve(),this.c=this.b=this.f=!1,this.g=new Promise(function(t){this.h=t}.bind(this))}function ji(t,e,i,n,r){var s,a=r in n;for(s in e){var o=r+"."+s,u=a?n[r]:i[s],h=!!{".abr.manager":!0}[o];(a||s in t)&&(void 0===e[s]?void 0===u||a?delete t[s]:t[s]=u:h?t[s]=e[s]:"object"==typeof t[s]&&"object"==typeof e[s]?ji(t[s],e[s],u,n,o):typeof e[s]==typeof u&&(t[s]=e[s]))}}function Bi(t,e){I.call(this),this.A=!1,this.f=t,this.m=null,this.v=new w,this.Ka=new u,this.pa=this.c=this.l=this.b=this.i=this.qa=this.C=this.F=this.g=this.h=null,this.Ra=1e9,this.oa=[],this.Da=!1,this.sa=!0,this.H=this.j=null,this.s={},this.a=Ki(this),this.Ca={width:1/0,height:1/0},this.B=[],this.Y=this.K=this.ra=0,e&&e(this),this.h=new Xt(this.Uc.bind(this)),this.qa=Ui(this);for(var i=0;i<this.f.textTracks.length;++i){var n=this.f.textTracks[i];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.m=n)}this.m||(this.m=this.f.addTextTrack("subtitles","Shaka Player TextTrack")),this.m.mode="hidden",k(this.v,this.f,"error",this.tc.bind(this))}function Ui(e){e.F=new MediaSource;var i=new g;return k(e.v,e.F,"sourceopen",i.resolve),e.f.src=t.URL.createObjectURL(e.F),i}function Fi(t){if(t.l&&t.l.configure(t.a.manifest),t.g&&t.g.configure(t.a.drm),t.b){t.b.configure(t.a.streaming);try{t.c.periods.forEach(t.Na.bind(t))}catch(e){t.ia(e)}zi(t,oi(t.b))}t.a.abr.enabled&&!t.sa?t.a.abr.manager.enable():t.a.abr.manager.disable(),t.a.abr.manager.setDefaultEstimate(t.a.abr.defaultBandwidthEstimate)}function Vi(t){t.v&&t.v.la(t.F,"sourceopen"),t.f&&(t.f.removeAttribute("src"),t.f.load());var e=Promise.all([t.a?t.a.abr.manager.stop():null,t.g?t.g.o():null,t.C?t.C.o():null,t.i?t.i.o():null,t.b?t.b.o():null,t.l?t.l.stop():null]);return t.g=null,t.C=null,t.i=null,t.b=null,t.l=null,t.c=null,t.pa=null,t.qa=null,t.F=null,t.s={},t.B=[],t.ra=0,t.K=0,e}function Ki(t){return{drm:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{}},manifest:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},dash:{customScheme:function(t){if(t)return null},clockSyncUri:""}},streaming:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,useRelativeCueTimestamps:!1},abr:{manager:t.Ka,enabled:!0,defaultBandwidthEstimate:5e5},preferredAudioLanguage:"",preferredTextLanguage:"",restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minAudioBandwidth:0,maxAudioBandwidth:1/0,minVideoBandwidth:0,maxVideoBandwidth:1/0}}}function Hi(t,e,i){for(var n in e){var r=e[n],s=i||!1;"text"==n&&(s=!0),t.sa?t.s[n]={stream:r,Vb:s}:ci(t.b,n,r,s)}}function qi(t){if(t.c){var e=Date.now()/1e3;t.Da?t.K+=e-t.Y:t.ra+=e-t.Y,t.Y=e}}function Gi(t,e,i){if(!j(e).some(Ne))return t.ia(new m(4,4012)),{};var n={};if(i)["video","audio","text"].forEach((function(t){t in e&&(n[t]=e[t])}));else for(var r in i=ui(t.b)){var s=i[r];s.allowedByApplication&&s.allowedByKeySystem&&e[r].language==s.language||(n[r]=e[r])}if(O(n))return{};Object.keys(n);var a=t.a.abr.manager.chooseStreams(n);return U(n,(function(t){return!!a[t]}))?a:(t.ia(new m(4,4012)),{})}function zi(t,e){var i,n={audio:!1,text:!1},r=Re(e,t.a,n),s=Gi(t,r);for(i in s)t.B.push({timestamp:Date.now()/1e3,id:s[i].id,type:i,fromAdaptation:!0});Hi(t,s,!0),Wi(t),r.text&&r.audio&&n.text&&r.text.language!=r.audio.language&&(t.m.mode="showing",$i(t))}function Wi(t){Promise.resolve().then(function(){this.A||this.dispatchEvent(new d("adaptation"))}.bind(t))}function Yi(t){Promise.resolve().then(function(){this.A||this.dispatchEvent(new d("trackschanged"))}.bind(t))}function $i(t){t.dispatchEvent(new d("texttrackvisibility"))}function Ji(t){this.a=new Ii,this.c=t,this.j=Zi(this),this.g=null,this.v=!1,this.i=null,this.l=[],this.f=-1,this.m=0,this.b=null,this.h=new Pi(t.h,t.getConfiguration().streaming.retryParameters,this.j)}function Xi(){return!!t.indexedDB}function Qi(t,e,i,n){function r(){}var s,a,o,u=t.c.h,h=t.c.getConfiguration();return Zt(e,u,h.manifest.retryParameters,n).then(function(t){return nn(this),(o=new t).configure(h.manifest),o.start(e,u,this.s.bind(this),i)}.bind(t)).then(function(t){return nn(this),s=t,(a=new he(u,i,r)).configure(h.drm),a.init(s,!0)}.bind(t)).then(function(){return nn(this),function(t){return t=t.periods.map((function(t){return t.streamSets})).reduce(N,[]).map((function(t){return t.streams})).reduce(N,[]),Promise.all(t.map((function(t){return t.createSegmentIndex()})))}(s)}.bind(t)).then(function(){return nn(this),le(a)}.bind(t)).then(function(){return nn(this),o.stop()}.bind(t)).then(function(){return nn(this),{manifest:s,Wb:a}}.bind(t)).catch((function(t){if(o)return o.stop().then((function(){throw t}));throw t}))}function Zi(t){return{trackSelectionCallback:t.B.bind(t),progressCallback:function(t,e){if(t||e)return null}}}function tn(t){return t.a.a?Promise.resolve():t.a.init(Sr)}function en(t){var e=t.g?t.g.o():Promise.resolve();return t.g=null,t.b=null,t.v=!1,t.i=null,t.l=[],t.f=-1,e}function nn(t){if(!t.c)throw new m(9,9002)}function rn(t){xr.push(t)}function sn(t){var e=t.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();e=new Event(e,t);t.target.dispatchEvent(e)}function an(t){for(this.c=[],this.b=[],this.a=[],t=new It(new DataView(t.buffer));_t(t);){var e=Mt(1886614376,t);if(-1==e)break;var i=t.a-8;if(1<(s=xt(t)))Nt(t,e-(t.a-i));else{Nt(t,3);var n=H(Pt(t,16)),r=[];if(0<s)for(var s=At(t),a=0;a<s;++a){var o=H(Pt(t,16));r.push(o)}Nt(t,s=At(t)),this.b.push.apply(this.b,r),this.c.push(n),this.a.push({start:i,end:t.a-1}),t.a!=i+e&&Nt(t,e-(t.a-i))}}}function on(t,e){try{var i=new un(t,e);return Promise.resolve(i)}catch(t){return Promise.reject(t)}}function un(t,e){this.keySystem=t;for(var i=!1,n=0;n<e.length;++n){var r=e[n],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},a=!1;if(r.audioCapabilities)for(var o=0;o<r.audioCapabilities.length;++o){var u=r.audioCapabilities[o];if(u.contentType){a=!0;var h=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,h)&&(s.audioCapabilities.push(u),i=!0)}}if(r.videoCapabilities)for(o=0;o<r.videoCapabilities.length;++o)(u=r.videoCapabilities[o]).contentType&&(a=!0,h=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,h)&&(s.videoCapabilities.push(u),i=!0));if(a||(i=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(s.persistentState="required",s.sessionTypes=["persistent-license"]),i)return void(this.a=s)}throw(i=Error("Unsupported keySystem")).name="NotSupportedError",i.code=DOMException.NOT_SUPPORTED_ERR,i}function hn(t){var e=this.mediaKeys;return e&&e!=t&&ln(e,null),delete this.mediaKeys,(this.mediaKeys=t)?ln(t,this):Promise.resolve()}function cn(t){this.a=new MSMediaKeys(t),this.b=new w}function ln(t,e){if(E(t.b),!e)return Promise.resolve();k(t.b,e,"msneedkey",fn);var i=t;try{return 1<=e.readyState?e.msSetMediaKeys(t.a):e.addEventListener("loadedmetadata",(function t(){e.msSetMediaKeys(i.a),e.removeEventListener("loadedmetadata",t)})),Promise.resolve()}catch(t){return Promise.reject(t)}}function dn(t){I.call(this),this.c=null,this.g=t,this.b=this.a=null,this.f=new w,this.sessionId="",this.expiration=NaN,this.closed=new g,this.keyStatuses=new gn}function fn(t){var e=document.createEvent("CustomEvent");if(e.initCustomEvent("encrypted",!1,!1,null),e.initDataType="cenc",t=t.initData){var i=new an(t);if(!(1>=i.a.length)){for(var n=[],r=0;r<i.a.length;r++)n.push(t.subarray(i.a[r].start,i.a[r].end+1));for(r=pn,t=[],i=0;i<n.length;++i){for(var s=!1,a=0;a<t.length&&!(s=r?r(n[i],t[a]):n[i]===t[a]);++a);s||t.push(n[i])}for(r=n=0;r<t.length;r++)n+=t[r].length;for(n=new Uint8Array(n),r=i=0;r<t.length;r++)n.set(t[r],i),i+=t[r].length;t=n}}e.initData=t,this.dispatchEvent(e)}function pn(t,e){return q(t,e)}function mn(t,e){t.keyStatuses.hb(e),t.dispatchEvent(new d("keystatuseschange"))}function gn(){this.size=0,this.a=void 0}function bn(){return Promise.reject(Error("The key system specified is not supported."))}function vn(t){return t?Promise.reject(Error("MediaKeys not supported.")):Promise.resolve()}function yn(){throw new TypeError("Illegal constructor.")}function Tn(){throw new TypeError("Illegal constructor.")}function wn(e){Cr=e,Ar=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=En,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Sn,t.MediaKeys=_n,t.MediaKeySystemAccess=In}function kn(t){return Cr?Cr+t.charAt(0).toUpperCase()+t.slice(1):t}function En(t,e){try{var i=new In(t,e);return Promise.resolve(i)}catch(t){return Promise.reject(t)}}function Sn(t){var e=this.mediaKeys;return e&&e!=t&&xn(e,null),delete this.mediaKeys,(this.mediaKeys=t)&&xn(t,this),Promise.resolve()}function In(t,e){this.a=this.keySystem=t;var i=!0;"org.w3.clearkey"==t&&(this.a="webkit-org.w3.clearkey",i=!1);var n,r=!1;n=(n=document.getElementsByTagName("video")).length?n[0]:document.createElement("video");for(var s=0;s<e.length;++s){var a=e[s],o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:a.initDataTypes,sessionTypes:["temporary"],label:a.label},u=!1;if(a.audioCapabilities)for(var h=0;h<a.audioCapabilities.length;++h){var c=a.audioCapabilities[h];if(c.contentType){u=!0;var l=c.contentType.split(";")[0];n.canPlayType(l,this.a)&&(o.audioCapabilities.push(c),r=!0)}}if(a.videoCapabilities)for(h=0;h<a.videoCapabilities.length;++h)(c=a.videoCapabilities[h]).contentType&&(u=!0,n.canPlayType(c.contentType,this.a)&&(o.videoCapabilities.push(c),r=!0));if(u||(r=n.canPlayType("video/mp4",this.a)||n.canPlayType("video/webm",this.a)),"required"==a.persistentState&&(i?(o.persistentState="required",o.sessionTypes=["persistent-license"]):r=!1),r)return void(this.b=o)}throw i="Unsupported keySystem","org.w3.clearkey"!=t&&"com.widevine.alpha"!=t||(i="None of the requested configurations were supported."),(i=Error(i)).name="NotSupportedError",i.code=DOMException.NOT_SUPPORTED_ERR,i}function _n(t){this.g=t,this.b=null,this.a=new w,this.c=[],this.f={}}function xn(t,e){t.b=e,E(t.a);var i=Cr;e&&(k(t.a,e,i+"needkey",t.yc.bind(t)),k(t.a,e,i+"keymessage",t.xc.bind(t)),k(t.a,e,i+"keyadded",t.vc.bind(t)),k(t.a,e,i+"keyerror",t.wc.bind(t)))}function An(t,e){var i=t.f[e];return i||((i=t.c.shift())?(i.sessionId=e,t.f[e]=i):null)}function Cn(t,e,i){I.call(this),this.f=t,this.h=!1,this.a=this.b=null,this.c=e,this.g=i,this.sessionId="",this.expiration=NaN,this.closed=new g,this.keyStatuses=new Rn}function Pn(t,e,i){if(t.h)return Promise.reject(Error("The session is already initialized."));var n;t.h=!0;try{if("persistent-license"==t.g)if(i)n=new Uint8Array(Et("LOAD_SESSION|"+i));else{var r=Et("PERSISTENT|"),s=new Uint8Array(r.byteLength+e.byteLength);s.set(new Uint8Array(r),0),s.set(new Uint8Array(e),r.byteLength),n=s}else n=new Uint8Array(e)}catch(t){return Promise.reject(t)}t.b=new g;var a=kn("generateKeyRequest");try{t.f[a](t.c,n)}catch(e){if("InvalidStateError"!=e.name)return t.b=null,Promise.reject(e);setTimeout(function(){try{this.f[a](this.c,n)}catch(t){this.b.reject(t),this.b=null}}.bind(t),10)}return t.b}function Nn(t,e){t.keyStatuses.hb(e),t.dispatchEvent(new d("keystatuseschange"))}function Rn(){this.size=0,this.a=void 0}function Dn(){var t=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var e=t.apply(this,arguments);return e.abort=function(){},e}}function Mn(t){var e=t.target,i=e.F;if(i.sb){for(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e.ob=!0,t=0;t<i.sourceBuffers.length;++t)if(0==i.sourceBuffers[t].ob)return;i.sb=!1}}function Ln(t){t=t.target;for(var e=0;e<t.sourceBuffers.length;++e)t.sourceBuffers[e].removeEventListener("updateend",Mn,!1);t.removeEventListener("sourceclose",Ln,!1)}function On(t){if(this.c=[],this.b=[],this.ka=Pr,t)try{t(this.X.bind(this),this.a.bind(this))}catch(t){this.a(t)}}function jn(t){var e=new On;return e.X(void 0),e.then((function(){return t}))}function Bn(t){var e=new On;return e.a(t),e}function Un(t){function e(t,e,i){t.ka==Pr&&(r[e]=i,++n==r.length&&t.X(r))}var i=new On;if(!t.length)return i.X([]),i;for(var n=0,r=Array(t.length),s=i.a.bind(i),a=0;a<t.length;++a)t[a]&&t[a].then?t[a].then(e.bind(null,i,a),s):e(i,a,t[a]);return i}function Fn(t){for(var e=new On,i=e.X.bind(e),n=e.a.bind(e),r=0;r<t.length;++r)t[r]&&t[r].then?t[r].then(i,n):i(t[r]);return e}function Vn(t,e,i){Rr.push(function(){if(i&&"function"==typeof i){try{var t=i(this.Pa)}catch(t){return void e.a(t)}var n;try{n=t&&t.then}catch(t){return void e.a(t)}t instanceof On?t==e?e.a(new TypeError("Chaining cycle detected")):t.then(e.X.bind(e),e.a.bind(e)):n?Kn(t,n,e):e.X(t)}else 1==this.ka?e.X(this.Pa):e.a(this.Pa)}.bind(t)),null==Nr&&(Nr=qn(Hn))}function Kn(t,e,i){try{var n=!1;e.call(t,(function(t){if(!n){var e;n=!0;try{e=t&&t.then}catch(t){return void i.a(t)}e?Kn(t,e,i):i.X(t)}}),i.a.bind(i))}catch(t){i.a(t)}}function Hn(){for(;Rr.length;){null!=Nr&&(Gn(Nr),Nr=null);var t=Rr;Rr=[];for(var e=0;e<t.length;++e)t[e]()}}function qn(){return 0}function Gn(){}function zn(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Wn(e,i,n){return new t.TextTrackCue(e,i,n)}function Yn(e,i,n){return new t.TextTrackCue(e+"-"+i+"-"+n,e,i,n)}var $n,Jn=this;Jn.md=!0,a.prototype.setDefaultEstimate=function(t){this.b=t},a.prototype.getBandwidthEstimate=function(){return 128e3>this.a?this.b:Math.min(s(this.c),s(this.f))},e("shaka.abr.SimpleAbrManager",u),u.prototype.stop=function(){this.h=null,this.f=!1,this.g={},this.a={},this.c=null},u.prototype.stop=u.prototype.stop,u.prototype.init=function(t){this.h=t},u.prototype.init=u.prototype.init,u.prototype.chooseStreams=function(t){for(var e in t)this.g[e]=t[e];if(e={},"audio"in t){var i=h(this);i?(e.audio=i,this.a.audio=i):delete this.a.audio}return"video"in t&&((i=c(this))?(e.video=i,this.a.video=i):delete this.a.video),"text"in t&&(e.text=t.text.streams[0]),this.c=Date.now(),e},u.prototype.chooseStreams=u.prototype.chooseStreams,u.prototype.enable=function(){this.f=!0},u.prototype.enable=u.prototype.enable,u.prototype.disable=function(){this.f=!1},u.prototype.disable=u.prototype.disable,u.prototype.segmentDownloaded=function(t,e,i){var n=this.b;if(e-=t,16e3>i||(t=8e3*i/e,e/=1e3,n.a+=i,r(n.c,e,t),r(n.f,e,t)),null!=this.c&&this.f)t:{if(this.i){if(8e3>Date.now()-this.c)break t}else{if(!(128e3<=this.b.a))break t;this.i=!0}i={},(n=h(this))&&(i.audio=n,this.a.audio=n),(n=c(this))&&(i.video=n,this.a.video=n),this.c=Date.now(),this.b.getBandwidthEstimate(),this.h(i)}},u.prototype.segmentDownloaded=u.prototype.segmentDownloaded,u.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate()},u.prototype.getBandwidthEstimate=u.prototype.getBandwidthEstimate,u.prototype.setDefaultEstimate=function(t){this.b.setDefaultEstimate(t)},u.prototype.setDefaultEstimate=u.prototype.setDefaultEstimate,d.prototype.preventDefault=function(){},d.prototype.stopImmediatePropagation=function(){this.a=!0},d.prototype.stopPropagation=function(){};var Xn="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Qn="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Zn=["loop","playbackRate"],tr=["pause","play"],er="adaptation buffering emsg error loading unloading texttrackvisibility trackschanged".split(" "),ir="drmInfo getConfiguration getManifestUri getPlaybackRate getTracks getStats isBuffering isInProgress isLive isTextTrackVisible keySystem seekRange".split(" "),nr=[["getConfiguration","configure"]],rr=[["isTextTrackVisible","setTextTrackVisibility"]],sr="addTextTrack cancelTrickPlay configure resetConfiguration selectTrack setTextTrackVisibility trickPlay".split(" "),ar=["load","unload"];e("shaka.util.Error",m),m.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},m.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},m.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_TTML:2006,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,DASH_DUPLICATE_REPRESENTATION_ID:4018,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7e3,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,INDEXED_DB_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007},($n=b.prototype).o=function(){return v(this),this.a&&(this.a.stop((function(){}),(function(){})),this.a=null),this.B=this.A=this.l=null,this.f=this.j=this.h=!1,this.g=this.c=this.b=this.a=this.i=null,Promise.resolve()},$n.O=function(){return this.f},$n.cb=function(){return this.v},$n.init=function(){if(t.chrome&&chrome.cast&&chrome.cast.isAvailable){delete t.__onGCastApiAvailable,this.h=!0,this.l();var e=new chrome.cast.SessionRequest(this.C);e=new chrome.cast.ApiConfig(e,this.kc.bind(this),this.rc.bind(this),"origin_scoped");chrome.cast.initialize(e,(function(){}),(function(){}))}else t.__onGCastApiAvailable=function(t){t&&this.init()}.bind(this)},$n.fb=function(t){this.i=t,this.f&&y(this,{type:"appData",appData:this.i})},$n.cast=function(t){return this.h?this.j?this.f?Promise.reject(new m(8,8002)):(this.g=new g,chrome.cast.requestSession(this.ab.bind(this,t),this.ub.bind(this)),this.g):Promise.reject(new m(8,8001)):Promise.reject(new m(8,8e3))},$n.get=function(t,e){if("video"==t){if(0<=tr.indexOf(e))return this.Fb.bind(this,t,e)}else if("player"==t){if(0<=sr.indexOf(e))return this.Fb.bind(this,t,e);if(0<=ar.indexOf(e))return this.Gc.bind(this,t,e);if(0<=ir.indexOf(e))return this.Cb.bind(this,t,e)}return this.Cb(t,e)},$n.set=function(t,e,i){this.b[t][e]=i,y(this,{type:"set",targetName:t,property:e,value:i})},$n.ab=function(t,e){this.a=e,this.a.addUpdateListener(this.vb.bind(this)),this.a.addMessageListener("urn:x-cast:com.google.shaka.v2",this.lc.bind(this)),this.vb(),y(this,{type:"init",initState:t,appData:this.i}),this.g.resolve()},$n.ub=function(t){var e=8003;switch(t.code){case"cancel":e=8004;break;case"timeout":e=8005;break;case"receiver_unavailable":e=8006}this.g.reject(new m(8,e,t))},$n.Cb=function(t,e){return this.b[t][e]},$n.Fb=function(t,e){y(this,{type:"call",targetName:t,methodName:e,args:Array.prototype.slice.call(arguments,2)})},$n.Gc=function(t,e){var i=Array.prototype.slice.call(arguments,2),n=new g,r=this.m.toString();return this.m++,this.c[r]=n,y(this,{type:"asyncCall",targetName:t,methodName:e,args:i,id:r}),n},$n.kc=function(t){var e=this.s();this.g=new g,this.ab(e,t)},$n.rc=function(t){this.j="available"==t,this.l()},$n.vb=function(){var t=!!this.a&&"connected"==this.a.status;if(this.f&&!t){for(var e in this.B(),this.b)this.b[e]={};v(this)}this.v=(this.f=t)?this.a.receiver.friendlyName:"",this.l()},$n.lc=function(t,e){switch((s=p(e)).type){case"event":var i=s.targetName,n=s.event;this.A(i,new d(n.type,n));break;case"update":for(i in n=s.update){var r,s=this.b[i]||{};for(r in n[i])s[r]=n[i][r]}break;case"asyncComplete":if(i=s.id,r=s.error,s=this.c[i],delete this.c[i],s)if(r){for(n in i=new m(r.category,r.code),r)i[n]=r[n];s.reject(i)}else s.resolve()}},($n=T.prototype).push=function(t,e){this.a.hasOwnProperty(t)?this.a[t].push(e):this.a[t]=[e]},$n.set=function(t,e){this.a[t]=e},$n.has=function(t){return this.a.hasOwnProperty(t)},$n.get=function(t){return(t=this.a[t])?t.slice():null},$n.remove=function(t,e){var i=this.a[t];if(i)for(var n=0;n<i.length;++n)i[n]==e&&(i.splice(n,1),--n)},$n.keys=function(){var t,e=[];for(t in this.a)e.push(t);return e},w.prototype.o=function(){return E(this),this.a=null,Promise.resolve()},w.prototype.la=function(t,e){for(var i=this.a.get(e)||[],n=0;n<i.length;++n){var r=i[n];r.target==t&&(r.la(),this.a.remove(e,r))}},S.prototype.la=function(){this.target&&(this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null)},I.prototype.addEventListener=function(t,e){this.Ba.push(t,e)},I.prototype.removeEventListener=function(t,e){this.Ba.remove(t,e)},I.prototype.dispatchEvent=function(t){for(var e=this.Ba.get(t.type)||[],i=0;i<e.length;++i){t.target=this.U,t.currentTarget=this.U;var n=e[i];try{n.handleEvent?n.handleEvent(t):n.call(this,t)}catch(t){}if(t.a)break}return t.defaultPrevented},i(_),e("shaka.cast.CastProxy",_),_.prototype.o=function(){var t=[this.h?this.h.o():null,this.b?this.b.o():null,this.a?this.a.o():null];return this.a=this.h=this.i=this.j=this.b=this.c=null,Promise.all(t)},_.prototype.destroy=_.prototype.o,_.prototype.cc=function(){return this.j},_.prototype.getVideo=_.prototype.cc,_.prototype.ac=function(){return this.i},_.prototype.getPlayer=_.prototype.ac,_.prototype.Qb=function(){return!!this.a&&this.a.h&&this.a.j},_.prototype.canCast=_.prototype.Qb,_.prototype.O=function(){return!!this.a&&this.a.O()},_.prototype.isCasting=_.prototype.O,_.prototype.cb=function(){return this.a?this.a.cb():""},_.prototype.receiverName=_.prototype.cb,_.prototype.cast=function(){var t=this.qb();return this.a.cast(t).then(function(){return this.b.kb()}.bind(this))},_.prototype.cast=_.prototype.cast,_.prototype.fb=function(t){this.a.fb(t)},_.prototype.setAppData=_.prototype.fb,_.prototype.cd=function(){var t=this.a;if(t.f){var e=t.s();chrome.cast.requestSession(t.ab.bind(t,e),t.ub.bind(t))}},_.prototype.suggestDisconnect=_.prototype.cd,($n=_.prototype).qb=function(){var t={video:{},player:{},playerAfterLoad:{},manifest:this.b.pa,startTime:null};return this.c.pause(),Zn.forEach(function(e){t.video[e]=this.c[e]}.bind(this)),this.c.ended||(t.startTime=this.c.currentTime),nr.forEach(function(e){var i=e[1];e=this.b[e[0]](),t.player[i]=e}.bind(this)),rr.forEach(function(e){var i=e[1];e=this.b[e[0]](),t.playerAfterLoad[i]=e}.bind(this)),t},$n.Vc=function(){this.dispatchEvent(new d("caststatuschanged"))},$n.Xc=function(){nr.forEach(function(t){var e=t[1];t=this.a.get("player",t[0])(),this.b[e](t)}.bind(this));var t=this.a.get("player","getManifestUri")(),e=this.a.get("video","ended"),i=Promise.resolve(),n=this.c.autoplay,r=null;e||(r=this.a.get("video","currentTime")),t&&(this.c.autoplay=!1,(i=this.b.load(t,r)).catch(function(t){this.b.dispatchEvent(new d("error",{detail:t}))}.bind(this)));var s={};Zn.forEach(function(t){s[t]=this.a.get("video",t)}.bind(this)),i.then(function(){Zn.forEach(function(t){this.c[t]=s[t]}.bind(this)),rr.forEach(function(t){var e=t[1];t=this.a.get("player",t[0])(),this.b[e](t)}.bind(this)),this.c.autoplay=n,t&&this.c.play()}.bind(this))},$n.jd=function(t){if("addEventListener"==t)return this.g.addEventListener.bind(this.g);if("removeEventListener"==t)return this.g.removeEventListener.bind(this.g);if(this.a.O()&&!Object.keys(this.a.b.video).length){var e=this.c[t];if("function"!=typeof e)return e}return this.a.O()?this.a.get("video",t):("function"==typeof(e=this.c[t])&&(e=e.bind(this.c)),e)},$n.ld=function(t,e){this.a.O()?this.a.set("video",t,e):this.c[t]=e},$n.kd=function(t){this.a.O()||this.g.dispatchEvent(new d(t.type,t))},$n.Bc=function(t){return"addEventListener"==t?this.f.addEventListener.bind(this.f):"removeEventListener"==t?this.f.removeEventListener.bind(this.f):"getNetworkingEngine"==t?this.b.rb.bind(this.b):this.a.O()&&!Object.keys(this.a.b.video).length&&0<=ir.indexOf(t)||!this.a.O()?(t=this.b[t]).bind(this.b):this.a.get("player",t)},$n.Cc=function(t){this.a.O()||this.f.dispatchEvent(t)},$n.Wc=function(t,e){this.a.O()&&("video"==t?this.g.dispatchEvent(e):"player"==t&&this.f.dispatchEvent(e))},i(x),e("shaka.cast.CastReceiver",x),x.prototype.ec=function(){return this.h},x.prototype.isConnected=x.prototype.ec,x.prototype.fc=function(){return this.c},x.prototype.isIdle=x.prototype.fc,x.prototype.o=function(){var e=this.a?this.a.o():Promise.resolve();return null!=this.f&&t.clearTimeout(this.f),this.j=this.i=this.a=this.b=null,this.h=!1,this.c=!0,this.f=this.g=null,e.then((function(){cast.receiver.CastReceiverManager.getInstance().stop()}))},x.prototype.destroy=x.prototype.o,($n=x.prototype).Ab=function(){this.h=!!cast.receiver.CastReceiverManager.getInstance().getSenders().length,C(this)},$n.Db=function(t,e){this.bb(),P(this,{type:"event",targetName:t,event:e})},$n.bb=function(){null!=this.f&&t.clearTimeout(this.f),this.f=t.setTimeout(this.bb.bind(this),500);var e={video:{},player:{}};Qn.forEach(function(t){e.video[t]=this.b[t]}.bind(this)),ir.forEach(function(t){e.player[t]=this.a[t]()}.bind(this));var i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();i&&(e.video.volume=i.level,e.video.muted=i.muted),P(this,{type:"update",update:e})},$n.Xb=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&P(this,{type:"update",update:{video:{volume:t.level,muted:t.muted}}}),P(this,{type:"event",targetName:"video",event:{type:"volumechange"}})},$n.mc=function(t){var e=p(t.data);switch(e.type){case"init":(function(t,e,i){for(var n in e.player)t.a[n](e.player[n]);t.j(i),i=Promise.resolve();var r=t.b.autoplay;e.manifest&&(t.b.autoplay=!1,(i=t.a.load(e.manifest,e.startTime)).catch(function(t){this.a.dispatchEvent(new d("error",{detail:t}))}.bind(t))),i.then(function(){for(var t in e.video){var i=e.video[t];this.b[t]=i}for(t in e.playerAfterLoad)i=e.playerAfterLoad[t],this.a[t](i);this.b.autoplay=r,e.manifest&&this.b.play()}.bind(t))})(this,e.initState,e.appData),this.bb();break;case"appData":this.j(e.appData);break;case"set":var i=e.targetName,n=e.property,r=e.value;if("video"==i){if(e=cast.receiver.CastReceiverManager.getInstance(),"volume"==n){e.setSystemVolumeLevel(r);break}if("muted"==n){e.setSystemVolumeMuted(r);break}}this.i[i][n]=r;break;case"call":i=e.targetName,n=e.methodName,r=e.args,(i=this.i[i])[n].apply(i,r);break;case"asyncCall":i=e.targetName,n=e.methodName,r=e.args,e=e.id,t=t.senderId,(i=this.i[i])[n].apply(i,r).then(this.Jb.bind(this,t,e,null),this.Jb.bind(this,t,e))}},$n.Jb=function(t,e,i){P(this,{type:"asyncComplete",id:e,error:i},t)};var or={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ur=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;($n=rt.prototype).T="",$n.ma="",$n.V="",$n.ya=null,$n.P="",$n.da="",$n.toString=function(){var t=[],e=this.T;if(e&&t.push(ht(e,hr,!0),":"),e=this.V){t.push("//");var i=this.ma;i&&t.push(ht(i,hr,!0),"@"),t.push(encodeURIComponent(e).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.ya)&&t.push(":",String(e))}return(e=this.P)&&(this.V&&"/"!=e.charAt(0)&&t.push("/"),t.push(ht(e,"/"==e.charAt(0)?lr:cr,!0))),(e=this.a.toString())&&t.push("?",e),(e=this.da)&&t.push("#",ht(e,fr)),t.join("")},$n.resolve=function(t){var e=new rt(this);"data"===e.T&&(e=new rt);var i=!!t.T;i?st(e,t.T):i=!!t.ma,i?e.ma=t.ma:i=!!t.V,i?e.V=t.V:i=null!=t.ya;var n=t.P;if(i)at(e,t.ya);else if(i=!!t.P){if("/"!=n.charAt(0))if(this.V&&!this.P)n="/"+n;else{-1!=(r=e.P.lastIndexOf("/"))&&(n=e.P.substr(0,r+1)+n)}if(".."==n||"."==n)n="";else if(-1!=n.indexOf("./")||-1!=n.indexOf("/.")){for(var r=!n.lastIndexOf("/",0),s=(n=n.split("/"),[]),a=0;a<n.length;){var o=n[a++];"."==o?r&&a==n.length&&s.push(""):".."==o?((1<s.length||1==s.length&&""!=s[0])&&s.pop(),r&&a==n.length&&s.push("")):(s.push(o),r=!0)}n=s.join("/")}}return i?e.P=n:i=""!==t.a.toString(),i?ot(e,dt(t.a)):i=!!t.da,i&&(e.da=t.da),e};var hr=/[#\/\?@]/g,cr=/[\#\?:]/g,lr=/[\#\?]/g,dr=/[\#\?@]/g,fr=/#/g;lt.prototype.a=null,lt.prototype.c=null,lt.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var t,e=[];for(t in this.a)for(var i=encodeURIComponent(t),n=this.a[t],r=0;r<n.length;r++){var s=i;""!==n[r]&&(s+="="+encodeURIComponent(n[r])),e.push(s)}return this.b=e.join("&")},e("shaka.media.InitSegmentReference",ft),e("shaka.media.SegmentReference",pt);var pr,mr=1/15,gr=1;e("shaka.media.SegmentIndex",jt),jt.prototype.o=function(){return this.a=null,Promise.resolve()},jt.prototype.destroy=jt.prototype.o,jt.prototype.find=function(t){for(var e=this.a.length-1;0<=e;--e){var i=this.a[e];if(t>=i.startTime&&t<i.endTime)return i.position}return null},jt.prototype.find=jt.prototype.find,jt.prototype.get=function(t){return this.a.length?0>(t-=this.a[0].position)||t>=this.a.length?null:this.a[t]:null},jt.prototype.get=jt.prototype.get,jt.prototype.Za=function(t){for(var e=[],i=0,n=0;i<this.a.length&&n<t.length;){var r=this.a[i],s=t[n];r.startTime<s.startTime?(e.push(r),i++):(r.startTime>s.startTime||(.1<Math.abs(r.endTime-s.endTime)?e.push(s):e.push(r),i++),n++)}for(;i<this.a.length;)e.push(this.a[i++]);if(e.length)for(i=e[e.length-1].position+1;n<t.length;)s=new pt(i++,(s=t[n++]).startTime,s.endTime,s.a,s.M,s.D),e.push(s);else e=t;this.a=e},jt.prototype.merge=jt.prototype.Za,jt.prototype.Ta=function(t){for(var e=0;e<this.a.length&&!(this.a[e].endTime>t);++e);this.a.splice(0,e)},jt.prototype.evict=jt.prototype.Ta,e("shaka.net.NetworkingEngine",Xt),Xt.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2};var br={};Xt.registerScheme=function(t,e){br[t]=e},Xt.unregisterScheme=function(t){delete br[t]},Xt.prototype.Ec=function(t){this.b.push(t)},Xt.prototype.registerRequestFilter=Xt.prototype.Ec,Xt.prototype.fd=function(t){var e=this.b;0<=(t=e.indexOf(t))&&e.splice(t,1)},Xt.prototype.unregisterRequestFilter=Xt.prototype.fd,Xt.prototype.Tb=function(){this.b=[]},Xt.prototype.clearAllRequestFilters=Xt.prototype.Tb,Xt.prototype.Eb=function(t){this.c.push(t)},Xt.prototype.registerResponseFilter=Xt.prototype.Eb,Xt.prototype.Ob=function(t){var e=this.c;0<=(t=e.indexOf(t))&&e.splice(t,1)},Xt.prototype.unregisterResponseFilter=Xt.prototype.Ob,Xt.prototype.Ub=function(){this.c=[]},Xt.prototype.clearAllResponseFilters=Xt.prototype.Ub,Xt.prototype.o=function(){this.f=!0,this.b=[],this.c=[];for(var t=[],e=0;e<this.a.length;++e)t.push(this.a[e].catch(R));return Promise.all(t)},Xt.prototype.destroy=Xt.prototype.o,Xt.prototype.request=function(t,e){if(this.f)return Promise.reject();for(var i=Date.now(),n=this.b,r=0;r<n.length;r++)try{n[r](t,e)}catch(t){return Promise.reject(t)}n=(r=e.retryParameters||{}).maxAttempts||1;var s=r.backoffFactor||2,a=null==r.baseDelay?1e3:r.baseDelay,o=this.g(t,e,0);for(r=1;r<n;r++)o=o.catch(this.i.bind(this,t,e,a,r%e.uris.length)),a*=s;return this.a.push(o),o.then(function(e){0<=this.a.indexOf(o)&&this.a.splice(this.a.indexOf(o),1);var n=Date.now();return this.h&&1==t&&this.h(i,n,e.data.byteLength),e}.bind(this)).catch(function(t){return 0<=this.a.indexOf(o)&&this.a.splice(this.a.indexOf(o),1),Promise.reject(t)}.bind(this))},Xt.prototype.request=Xt.prototype.request,Xt.prototype.g=function(t,e,i){if(this.f)return Promise.reject();var n=new rt(e.uris[i]),r=n.T;return r||(st(n,r=(r=location.protocol).slice(0,-1)),e.uris[i]=n.toString()),(r=br[r])?r(e.uris[i],e).then(function(e){for(var i=this.c,n=0;n<i.length;n++)i[n](t,e);return e}.bind(this)):Promise.reject(new m(1,1e3,n))},Xt.prototype.i=function(e,i,n,r){var s=new g,a=i.retryParameters||{};return t.setTimeout(s.resolve,n*(1+(2*Math.random()-1)*(null==a.fuzzFactor?.5:a.fuzzFactor))),s.then(this.g.bind(this,e,i,r))};var vr={},yr={};e("shaka.media.ManifestParser.registerParserByExtension",(function(t,e){yr[t]=e})),e("shaka.media.ManifestParser.registerParserByMime",(function(t,e){vr[t]=e})),e("shaka.media.PresentationTimeline",te),te.prototype.ea=function(){return this.a},te.prototype.getDuration=te.prototype.ea,te.prototype.Aa=function(t){this.a=t},te.prototype.setDuration=te.prototype.Aa,te.prototype.Kb=function(t){this.h=t},te.prototype.setClockOffset=te.prototype.Kb,te.prototype.Mb=function(t){this.g=t},te.prototype.setStatic=te.prototype.Mb,te.prototype.bc=function(){return this.c},te.prototype.getSegmentAvailabilityDuration=te.prototype.bc,te.prototype.Lb=function(t){this.c=t},te.prototype.setSegmentAvailabilityDuration=te.prototype.Lb,te.prototype.Ha=function(t,e){e.length&&(this.b=e.reduce((function(t,e){return Math.max(t,e.endTime-e.startTime)}),this.b),t||(this.f=Math.max(this.f,e[0].startTime)))},te.prototype.notifySegments=te.prototype.Ha,te.prototype.$a=function(t){this.b=Math.max(this.b,t)},te.prototype.notifyMaxSegmentDuration=te.prototype.$a,te.prototype.S=function(){return 1/0==this.a&&!this.g},te.prototype.isLive=te.prototype.S,te.prototype.fa=function(){return 1/0!=this.a&&!this.g},te.prototype.isInProgress=te.prototype.fa,te.prototype.ta=function(){return Math.max(Math.min(this.f,this.Z()),this.ua())},te.prototype.getEarliestStart=te.prototype.ta,te.prototype.ua=function(){return 1/0==this.c?0:Math.max(0,this.Z()-this.c)},te.prototype.getSegmentAvailabilityStart=te.prototype.ua,te.prototype.Z=function(){return this.S()||this.fa()?Math.min(Math.max(0,(Date.now()+this.h)/1e3-this.b-this.j),this.a):this.a},te.prototype.getSegmentAvailabilityEnd=te.prototype.Z,te.prototype.Va=function(){return Math.max(0,this.Z()-(this.S()||this.fa()?this.i:0))},te.prototype.getSeekRangeEnd=te.prototype.Va;var Tr={};e("shaka.media.TextEngine.registerParser",(function(t,e){Tr[t]=e})),e("shaka.media.TextEngine.unregisterParser",(function(t){delete Tr[t]})),e("shaka.media.TextEngine.makeCue",ie),ee.prototype.o=function(){return this.c&&re(this,(function(){return!0})),this.c=this.g=null,Promise.resolve()},ee.prototype.remove=function(t,e){return Promise.resolve().then(function(){this.c&&(re(this,(function(i){return!(i.startTime>=e||i.endTime<=t)})),null==this.b||e<=this.b||t>=this.a||(t<=this.b&&e>=this.a?this.b=this.a=null:t<=this.b&&e<this.a?this.b=e:t>this.b&&e>=this.a&&(this.a=t)))}.bind(this))};var wr=1,kr=2,Er={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};ue.prototype.cancel=function(){null!=this.a&&(clearTimeout(this.a),this.a=null)},($n=he.prototype).o=function(){this.c=!0;var t=this.a.map((function(t){return(t.ha.close()||Promise.resolve()).catch(R)}));return this.j.reject(),this.f&&t.push(this.f.o()),this.l&&t.push(this.l.setMediaKeys(null).catch(R)),this.v&&this.v.cancel(),this.f=this.l=this.h=this.s=this.b=this.v=null,this.a=[],this.m=[],this.g=this.i=this.H=null,Promise.all(t)},$n.configure=function(t){this.i=t},$n.init=function(t,e){var i={},n=[];return this.C=e,this.m=t.offlineSessionIds,function(t,e,i,n,r){var s=fe(t);e.periods.forEach(function(t){t.streamSets.forEach(function(t){"text"!=t.type&&(s&&(t.drmInfos=[s]),t.drmInfos.forEach(function(e){!function(t,e){var i=e.keySystem;if(i){if(!e.licenseServerUri){var n=t.i.servers[i];n&&(e.licenseServerUri=n)}e.keyIds||(e.keyIds=[]),(i=t.i.advanced[i])&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=i.persistentStateRequired),e.videoRobustness||(e.videoRobustness=i.videoRobustness),e.audioRobustness||(e.audioRobustness=i.audioRobustness),e.serverCertificate||(e.serverCertificate=i.serverCertificate))}}(this,e);var s=n[e.keySystem];s||(s={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:i?"required":"optional",sessionTypes:[i?"persistent-license":"temporary"],label:e.keySystem,drmInfos:[]},n[e.keySystem]=s,r.push(e.keySystem)),s.drmInfos.push(e),e.distinctiveIdentifierRequired&&(s.distinctiveIdentifier="required"),e.persistentStateRequired&&(s.persistentState="required");var a="video"==t.type?s.videoCapabilities:s.audioCapabilities,o=("video"==t.type?e.videoRobustness:e.audioRobustness)||"";t.streams.forEach(function(t){var i=t.mimeType;t.codecs&&(i+='; codecs="'+t.codecs+'"'),t.keyId&&e.keyIds.push(t.keyId),a.push({robustness:o,contentType:i})}.bind(this))}.bind(this)))}.bind(this))}.bind(t))}(this,t,e||0<t.offlineSessionIds.length,i,n),n.length?de(this,i,n):(this.B=!0,Promise.resolve())},$n.keySystem=function(){return this.b?this.b.keySystem:""},$n.jc=function(t){for(var e=new Uint8Array(t.initData),i=0;i<this.a.length;++i)if(q(e,this.a[i].initData))return;me(this,t.initDataType,e)},$n.Bb=function(t){for(var e,i=t.target,n=0;n<this.a.length;n++)if(this.a[n].ha==i){e=this.a[n].Oa;break}(n=Qt([this.b.licenseServerUri],this.i.retryParameters)).body=t.message,n.method="POST","com.microsoft.playready"==this.b.keySystem&&function(t){for(var e=kt(t.body,!0),i=(e=(new DOMParser).parseFromString(e,"application/xml")).getElementsByTagName("HttpHeader"),n=0;n<i.length;++n)t.headers[i[n].querySelector("name").textContent]=i[n].querySelector("value").textContent;t.body=V(e.querySelector("Challenge").textContent).buffer}(n),this.H.request(2,n).then(function(t){return this.c?Promise.reject():i.update(t.data).then((function(){e&&e.resolve()}))}.bind(this),function(t){return this.c?Promise.resolve():(t=new m(6,6007,t),this.g(t),void(e&&e.reject(t)))}.bind(this)).catch(function(t){return this.c?Promise.resolve():(t=new m(6,6008,t.message),this.g(t),void(e&&e.reject(t)))}.bind(this))},$n.wb=function(t){var e;for(t=t.target,e=0;e<this.a.length&&this.a[e].ha!=t;++e);if(e!=this.a.length){var i=!1;t.keyStatuses.forEach(function(t,n){if("string"==typeof n){var r=n;n=t,t=r}if("com.microsoft.playready"==this.b.keySystem&&16==n.byteLength){var s=(r=new DataView(n)).getUint32(0,!0),a=r.getUint16(4,!0),o=r.getUint16(6,!0);r.setUint32(0,s,!1),r.setUint16(4,a,!1),r.setUint16(6,o,!1)}"com.microsoft.playready"==this.b.keySystem&&"status-pending"==t&&(t="usable"),"status-pending"!=t&&(this.a[e].loaded=!0,this.a.every((function(t){return t.loaded}))&&this.j.resolve()),"expired"==t&&(i=!0),r=H(new Uint8Array(n)),this.A[r]=t}.bind(this));var n=t.expiration-Date.now();(0>n||i&&1e3>n)&&!this.a[e].Oa&&(this.a.splice(e,1),t.close()),function(t){t.cancel(),t.a=setTimeout(t.b,100)}(this.v)}},$n.Dc=function(){U(this.A,(function(t,e){return"expired"==e}))&&this.g(new m(6,6014)),this.K(this.A)},($n=ye.prototype).o=function(){this.h=!0;var t,e=[];for(t in this.a){var i=this.a[t],n=i[0];for(this.a[t]=i.slice(0,1),n&&e.push(n.p.catch(R)),n=1;n<i.length;++n)i[n].p.catch(R),i[n].p.reject()}return this.b&&e.push(this.b.o()),Promise.all(e).then(function(){this.g.o(),this.b=this.i=this.F=this.f=this.g=null,this.c={},this.a={}}.bind(this))},$n.init=function(t,e){for(var i in t){var n=t[i];"text"==i?this.b=new ee(this.i,n,e):(n=this.F.addSourceBuffer(n),k(this.g,n,"error",this.$c.bind(this,i)),k(this.g,n,"updateend",this.xa.bind(this,i)),this.c[i]=n,this.a[i]=[])}},$n.remove=function(t,e,i){return"text"==t?this.b.remove(e,i):Se(this,t,this.Gb.bind(this,t,e,i))},$n.endOfStream=function(t){return Ie(this,function(){t?this.F.endOfStream(t):this.F.endOfStream()}.bind(this))},$n.Aa=function(t){return Ie(this,function(){this.F.duration=t}.bind(this))},$n.ea=function(){return this.F.duration},$n.Zc=function(t,e){this.c[t].appendBuffer(e)},$n.Gb=function(t,e,i){i<=e?this.xa(t):this.c[t].remove(e,i)},$n.Pb=function(t){var e=this.c[t].appendWindowEnd;this.c[t].abort(),this.c[t].appendWindowEnd=e,this.xa(t)},$n.Yb=function(t){this.f.currentTime-=.001,this.xa(t)},$n.Pc=function(t,e){this.c[t].timestampOffset=e,this.xa(t)},$n.Nc=function(t,e){this.c[t].appendWindowEnd=e+.04,this.xa(t)},$n.$c=function(t){this.a[t][0].p.reject(new m(3,3014,this.f.error?this.f.error.code:0))},$n.xa=function(t){var e=this.a[t][0];e&&(e.p.resolve(),_e(this,t))},e("shaka.dash.DashParser",Le),($n=Le.prototype).configure=function(t){this.c=t},$n.start=function(t,e,i,n,r){return this.g=[t],this.a=e,this.j=i,this.l=n,this.m=r,Oe(this).then(function(){return this.a&&Be(this,0),this.b}.bind(this))},$n.stop=function(){return this.a&&this.a.Ob(this.La),this.c=this.m=this.l=this.j=this.a=null,this.g=[],this.b=null,this.h=[],this.i={},null!=this.f&&(t.clearTimeout(this.f),this.f=null),Promise.resolve()},$n.zc=function(t,e){t.R=Ue(e,t.L,null);var i=!1,n=z(e,"Role"),r=void 0;"text"==t.R.contentType&&(r="subtitle");for(var s=0;s<n.length;s++){if(null==(h=n[s].getAttribute("schemeIdUri"))||"urn:mpeg:dash:role:2011"==h)switch(h=n[s].getAttribute("value")){case"main":i=!0;break;case"caption":case"subtitle":r=h}}n=function(t){if(G(t,"InbandEventStream"))return!0;if(0<(t=z(t,"Representation")).length)for(var e=0;e<t.length;e++)if(G(t[e],"InbandEventStream"))return!0;return!1}(e);var a=[];z(e,"SupplementalProperty").forEach((function(t){var e=t.getAttribute("schemeIdUri");("urn:mpeg:dash:adaptation-set-switching:2016"==e||"http://dashif.org/guidelines/AdaptationSetSwitching"==e||"http://dashif.org/descriptor/AdaptationSetSwitching"==e)&&(t=t.getAttribute("value"))&&a.push.apply(a,t.split(","))}));var o=null,u=!1;if(z(e,"EssentialProperty").forEach((function(t){"http://dashif.org/guidelines/trickmode"==t.getAttribute("schemeIdUri")?o=t.getAttribute("value"):u=!0})),null!=o||u)return null;s=it(s=z(e,"ContentProtection"),this.c.dash.customScheme);var h=ae(e.getAttribute("lang")||"und"),c=z(e,"Representation");if(!(r=c.map(this.Ac.bind(this,t,s,r,h)).filter((function(t){return!!t}))).length)throw new m(4,4003);return t.R.contentType||(t.R.contentType=Ve(r[0].mimeType,r[0].codecs)),c=c.map((function(t){return t.getAttribute("id")})).filter(D),{id:t.R.id||"__fake__"+this.v++,contentType:t.R.contentType,language:h,hc:i,streams:r,drmInfos:s.drmInfos,dd:a,ca:n,Hc:c}},$n.Ac=function(t,e,i,n,r){if(t.u=Ue(r,t.R,null),!function(t){var e;return e=0+(t.Ia?1:0),e+=t.$?1:0,(e+=t.Ja?1:0)?(1!=e&&(t.Ia&&(t.$=null),t.Ja=null),!0):"text"==t.contentType||"application"==t.contentType}(t.u))return null;var s;if(t.bandwidth=Y(r,"bandwidth",Z)||void 0,s=this.Ic.bind(this),t.u.Ia)s=function(t,e){var i,n=yt(t,zt,"presentationTimeOffset"),r=qt(t,zt);i=Number(n);var s=t.u.contentType,a=t.u.mimeType.split("/")[1];if("text"!=s&&"mp4"!=a&&"webm"!=a)throw new m(4,4006);if("webm"==a&&!r)throw new m(4,4005);s=Tt(t,zt,"RepresentationIndex");var o=yt(t,zt,"indexRange"),u=t.u.N;if(o=X(o||""),s){var h=s.getAttribute("sourceURL");h&&(u=bt(t.u.N,[h])),o=Y(s,"range",X,o)}if(!o)throw new m(4,4002);return{createSegmentIndex:(i=Gt(t,e,r,u,o.start,o.end,a,i)).createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:r,presentationTimeOffset:Number(n)||0}}(t,s);else if(t.u.$)s=Wt(t,this.i);else if(t.u.Ja)s=$t(t,s,this.i,!!this.b);else{var a=t.u.N,o=t.I.duration||0;s={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(t){return 0<=t&&t<o?1:null},getSegmentReference:function(t){return 1!=t?null:new pt(1,0,o,(function(){return a}),0,null)},initSegmentReference:null,presentationTimeOffset:0}}return r=function(t,e,i){var n=it(t,e);if(i.pb)t=1==i.drmInfos.length&&!i.drmInfos[0].keySystem,e=!n.drmInfos.length,(!i.drmInfos.length||t&&!e)&&(i.drmInfos=n.drmInfos),i.pb=!1;else if(0<n.drmInfos.length&&(i.drmInfos=i.drmInfos.filter((function(t){return n.drmInfos.some((function(e){return e.keySystem==t.keySystem}))})),!i.drmInfos.length))throw new m(4,4008);return n.nb||i.nb}(r=z(r,"ContentProtection"),this.c.dash.customScheme,e),{id:this.v++,createSegmentIndex:s.createSegmentIndex,findSegmentPosition:s.findSegmentPosition,getSegmentReference:s.getSegmentReference,initSegmentReference:s.initSegmentReference,presentationTimeOffset:s.presentationTimeOffset,mimeType:t.u.mimeType,codecs:t.u.codecs,frameRate:t.u.frameRate,bandwidth:t.bandwidth,width:t.u.width,height:t.u.height,kind:i,encrypted:0<e.drmInfos.length,keyId:r,language:n,allowedByApplication:!0,allowedByKeySystem:!0}},$n.Yc=function(){this.f=null;var t=Date.now();Oe(this).then(function(){this.a&&Be(this,(Date.now()-t)/1e3)}.bind(this)).catch(function(t){this.l(t),this.a&&Be(this,0)}.bind(this))},$n.Ic=function(t,e,i){return t=Qt(t,this.c.retryParameters),null!=e&&(t.headers.Range="bytes="+e+"-"+(null!=i?i:"")),this.a.request(1,t).then((function(t){return t.data}))},$n.La=function(t,e){if(1==t){var i=Mt(1701671783,h=new It(new DataView(e.data)));if(-1!=i){var n=h.a-8+i;if(Nt(h,4),"urn:mpeg:dash:event:2012"==(i=Rt(h)))Oe(this);else{var r=Rt(h),s=At(h),a=At(h),o=At(h),u=At(h),h=Pt(h,n-h.a);this.m(new d("emsg",{detail:{schemeIdUri:i,value:r,timescale:s,presentationTimeDelta:a,eventDuration:o,id:u,messageData:h}}))}}}},yr.mpd=Le,vr["application/dash+xml"]=Le,e("shaka.media.TtmlTextParser",Ke),Ke.m=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Ke.v=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Ke.s=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Ke.A=/^(\d*\.?\d*)f$/,Ke.C=/^(\d*\.?\d*)t$/,Ke.B=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/,Ke.l=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Ke.Ka={left:"start",center:"center",right:"end",start:"start",end:"end"},Ke.Ra={left:"line-left",center:"center",right:"line-right"},Ke.b=function(t){var e=[];if(!t)return e;for(var i=t.childNodes,n=0;n<i.length;n++){var r="span"==i[n].nodeName&&"p"==t.nodeName;i[n].nodeType!=Node.ELEMENT_NODE||"br"==i[n].nodeName||r||(r=Ke.b(i[n]),e=e.concat(r))}return e.length||e.push(t),e},Ke.h=function(t,e){for(var i=t.childNodes,n=0;n<i.length;n++)if("br"==i[n].nodeName&&0<n)i[n-1].textContent+="\n";else if(0<i[n].childNodes.length)Ke.h(i[n],e);else if(e){var r=(r=i[n].textContent.trim()).replace(/\s+/g," ");i[n].textContent=r}},Ke.c=function(t,e,i,n,r,s){if(!t.hasAttribute("begin")&&!t.hasAttribute("end")&&/^\s*$/.test(t.textContent))return null;Ke.h(t,s),s=Ke.a(t.getAttribute("begin"),i);var a=Ke.a(t.getAttribute("end"),i);i=Ke.a(t.getAttribute("dur"),i);var o=t.textContent;if(null==a&&null!=i&&(a=s+i),null==s||null==a)throw new m(2,2001);return(e=ie(s+e,a+e,o))?(r=Ke.i(t,"region",r),Ke.qa(e,t,r,n),e):null},Ke.qa=function(t,e,i,n){var r,s=Ke.f(e,i,n,"tts:extent");s&&(r=Ke.l.exec(s))&&(t.size=Number(r[1])),s=!0,"tb"==(r=Ke.f(e,i,n,"tts:writingMode"))||"tblr"==r?t.vertical="lr":"tbrl"==r?t.vertical="rl":s=!1,(r=Ke.f(e,i,n,"tts:origin"))&&(r=Ke.l.exec(r))&&(s?(t.position=Number(r[2]),t.line=Number(r[1])):(t.position=Number(r[1]),t.line=Number(r[2])),t.snapToLines=!1),(e=Ke.f(e,i,n,"tts:textAlign"))&&(t.align=e,"center"==e&&("center"!=t.align&&(t.align="middle"),t.position="auto"),t.positionAlign=Ke.Ra[e],t.lineAlign=Ke.Ka[e])},Ke.f=function(t,e,i,n){for(var r=Ke.b(e),s=0;s<r.length;s++){var a=r[s].getAttribute(n);if(a)return a}return(t=(r=Ke.i)(e,"style",i)||r(t,"style",i))?t.getAttribute(n):null},Ke.i=function(t,e,i){if(!t||1>i.length)return null;var n=null;if(t=Ke.ra(t,e))for(e=0;e<i.length;e++)if(i[e].getAttribute("xml:id")==t){n=i[e];break}return n},Ke.ra=function(t,e){for(var i=null;t&&!(i=t.getAttribute(e));){var n=t.parentNode;if(!(n instanceof Element))break;t=n}return i},Ke.a=function(t,e){var i=null;return Ke.m.test(t)?i=Ke.sa(e,t):Ke.v.test(t)?i=Ke.g(Ke.v,t):Ke.s.test(t)?i=Ke.g(Ke.s,t):Ke.A.test(t)?i=Ke.Ca(e,t):Ke.C.test(t)?i=Ke.Da(e,t):Ke.B.test(t)&&(i=Ke.g(Ke.B,t)),i},Ke.Ca=function(t,e){var i=Ke.A.exec(e);return Number(i[1])/t.frameRate},Ke.Da=function(t,e){var i=Ke.C.exec(e);return Number(i[1])/t.a},Ke.sa=function(t,e){var i=Ke.m.exec(e),n=Number(i[1]),r=Number(i[2]);return Number(i[3])+(Number(i[4])+(Number(i[5])||0)/t.b)/t.frameRate+60*r+3600*n},Ke.g=function(t,e){var i=t.exec(e);return i&&""!=i[0]?(Number(i[4])||0)/1e3+(Number(i[3])||0)+60*(Number(i[2])||0)+3600*(Number(i[1])||0):null},Tr["application/ttml+xml"]=Ke,e("shaka.media.Mp4TtmlParser",qe),qe.U=1937010800,Tr['application/mp4; codecs="stpp"']=qe,e("shaka.media.VttTextParser",Ye),Ye.c=function(t,e,i,n){if(1==t.length&&!t[0]||/^NOTE($|[ \t])/.test(t[0]))return null;var r=null;0>t[0].indexOf("--\x3e")&&(r=t[0],t.splice(0,1));var s=new Ge(t[0]),a=Ye.a(s),o=ze(s,/[ \t]+--\x3e[ \t]+/g),u=Ye.a(s);if(null==a||!o||null==u)throw new m(2,2001);if(n?(a+=i,u+=i):(a+=e,u+=e),!(t=ie(a,u,t.slice(1).join("\n").trim())))return null;for(ze(s,/[ \t]+/gm),e=We(s);e;)Ye.j(t,e),ze(s,/[ \t]+/gm),e=We(s);return null!=r&&(t.id=r),t},Ye.j=function(t,e){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(e))?(t.align=i[1],"center"==i[1]&&"center"!=t.align&&(t.position="auto",t.align="middle")):(i=/^vertical:(lr|rl)$/.exec(e))?t.vertical=i[1]:(i=/^size:(\d{1,2}|100)%$/.exec(e))?t.size=Number(i[1]):(i=/^position:(\d{1,2}|100)%(?:,(line-left|line-right|center|start|end))?$/.exec(e))?(t.position=Number(i[1]),i[2]&&(t.positionAlign=i[2])):(i=/^line:(\d{1,2}|100)%(?:,(start|end|center))?$/.exec(e))?(t.snapToLines=!1,t.line=Number(i[1]),i[2]&&(t.lineAlign=i[2])):(i=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(e))&&(t.snapToLines=!0,t.line=Number(i[1]),i[2]&&(t.lineAlign=i[2]))},Ye.a=function(t){if(!(t=ze(t,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var e=Number(t[2]),i=Number(t[3]);return 59<e||59<i?null:Number(t[4])/1e3+i+60*e+3600*(Number(t[1])||0)},Tr["text/vtt"]=Ye,Tr['text/vtt; codecs="vtt"']=Ye,e("shaka.media.Mp4VttParser",$e),$e.Ba=function(t,e,i,n){for(t=new It(new DataView(t)),i+=e,n+=e,e=[];_t(t);){var r=Mt($e.oa,t);if(-1==r)break;(r=$e.c(Pt(t,r-8).buffer,i,n))&&e.push(r)}return e},$e.c=function(t,e,i){t=new It(new DataView(t));for(var n,r,s;_t(t);){var a=At(t),o=At(t),u=wt(Pt(t,a-8).buffer);switch(1==a&&Ct(t),o){case $e.K:n=u;break;case $e.H:s=u;break;case $e.Y:r=u}}if(!n)throw new m(2,2008);if(!(e=ie(e,i,n)))return null;if(s&&(e.id=s),r)for(s=We(r=new Ge(r));s;)Ye.j(e,s),ze(r,/[ \t]+/gm),s=We(r);return e},$e.pa=2004251764,$e.oa=1987343459,$e.K=1885436268,$e.H=1768187247,$e.Y=1937011815,Tr['application/mp4; codecs="wvtt"']=$e,($n=Je.prototype).o=function(){var e=this.b.o();return this.b=null,ei(this),null!=this.f&&(t.clearInterval(this.f),this.f=null),this.m=this.l=this.c=this.a=null,e},$n.uc=function(){this.i=null,ti(this);var t=ve(this.a.buffered,this.a.currentTime,.1),e=ge(this.a.buffered)>=(this.c.S()?this.c.Z()-.1:this.a.duration-.1)||this.a.ended;this.g?(e||t>=this.j)&&Ze(this,!1):!e&&.5>t&&Ze(this,!0)},$n.Ua=function(){return this.h},$n.qc=function(){this.a.playbackRate!=(this.g||0>this.h?0:this.h)&&ii(this,this.a.playbackRate)},$n.xb=function(){this.b.la(this.a,"loadedmetadata");var t=Qe(this);.001>Math.abs(this.a.currentTime-t)?(k(this.b,this.a,"seeking",this.zb.bind(this)),k(this.b,this.a,"playing",this.yb.bind(this))):(k(this.b,this.a,"seeking",this.sc.bind(this)),this.a.currentTime=t)},$n.sc=function(){this.b.la(this.a,"seeking"),k(this.b,this.a,"seeking",this.zb.bind(this)),k(this.b,this.a,"playing",this.yb.bind(this))},$n.zb=function(){var t=this.a.currentTime,e=ni(this,t);.001<Math.abs(e-t)?ri(this,t,e):this.m()},$n.yb=function(){var t=this.a.currentTime,e=ni(this,t);.001<Math.abs(e-t)&&ri(this,t,e)},ai.prototype.o=function(){for(var t in this.b)ki(this.b[t]);return this.g=this.b=this.l=this.h=this.B=this.A=this.j=this.v=this.H=this.C=this.a=this.U=this.f=this.m=null,this.c=!0,Promise.resolve()},ai.prototype.configure=function(t){this.g=t,this.m.j=this.i*Math.max(this.a.minBufferTime||0,this.g.rebufferingGoal)},ai.prototype.init=function(){var t=this.H(this.a.periods[bi(this,Xe(this.m))]);return O(t)?Promise.reject(new m(5,5005)):li(this,t).then(function(){this.A&&this.A()}.bind(this))},ai.prototype.Y=function(t){if(!this.c&&!t.ga&&null!=t.aa&&!t.ba)if(t.aa=null,t.na)Ti(this,t,t.Qa);else{try{var e=pi(this,t);null!=e&&(wi(this,t,e),t.Xa=!1)}catch(t){return void this.j(t)}e=j(this.b),function(t,e){if(e.Ga!=vi(t,e.stream)){var i=e.Ga,n=j(t.b);n.every((function(t){return t.Ga==i}))&&n.every(gi)&&di(t,i).then(function(){if(!this.c&&n.every(function(t){var e=vi(this,t.stream);return gi(t)&&t.Ga==i&&e!=i}.bind(this))){var t,e=this.a.periods[i],r=this.H(e);for(t in this.b)if(!r[t]&&"text"!=t)return void this.j(new m(5,5005));for(t in r)if(!this.b[t]){if("text"!=t)return void this.j(new m(5,5005));li(this,{text:r.text},e.startTime),delete r[t]}for(t in this.b)(e=r[t])?(ci(this,t,e,!1),wi(this,this.b[t],0)):delete this.b[t];this.v()}}.bind(t)).catch(R)}}(this,t),e.every((function(t){return t.endOfStream}))&&this.f.endOfStream()}},e("shaka.net.DataUriPlugin",Ei),br.data=Ei,e("shaka.net.HttpPlugin",Si),br.http=Si,br.https=Si,($n=Ii.prototype).init=function(e){if(!t.indexedDB)return Promise.reject(new m(9,9e3));var i=t.indexedDB.open("shaka_offline_db",1),n=new g;return i.onupgradeneeded=function(t){for(var i in t=t.target.result,e)t.createObjectStore(i,{keyPath:e[i]})},i.onsuccess=function(t){this.a=t.target.result,n.resolve()}.bind(this),i.onerror=Ai.bind(null,i,n),n.then(function(){var t=Object.keys(e);return Promise.all(t.map(function(t){return function(t,e){var i=0;return xi(t,e,"readonly",(function(t){return t.openCursor(null,"prev")}),(function(t){t&&(i=t.key+1)})).then((function(){return i}))}(this,t).then(function(e){this.b[t]=e}.bind(this))}.bind(this)))}.bind(this))},$n.o=function(){return Promise.all(this.c.map((function(t){try{t.transaction.abort()}catch(t){}return t.J.catch(R)}))).then(function(){this.a&&(this.a.close(),this.a=null)}.bind(this))},$n.get=function(t,e){return xi(this,t,"readonly",(function(t){return t.get(e)}))},$n.forEach=function(t,e){return xi(this,t,"readonly",(function(t){return t.openCursor()}),(function(t){t&&(e(t.value),t.continue())}))},$n.remove=function(t,e){return xi(this,t,"readwrite",(function(t){return t.delete(e)}))};var Sr={manifest:"key",segment:"key"};Pi.prototype.o=function(){var t=this.j||Promise.resolve();return this.b={},this.j=this.a=this.l=this.m=this.i=null,t},Di.prototype.configure=function(){},Di.prototype.start=function(t){var e=/^offline:([0-9]+)$/.exec(t);if(!e)return Promise.reject(new m(1,9004,t));var i=Number(e[1]),n=new Ii;return n.init(Sr).then((function(){return n.get("manifest",i)})).then((function(t){if(!t)throw new m(9,9003,i);return Mi(t)})).then((function(t){return n.o().then((function(){return t}))}),(function(t){return n.o().then((function(){throw t}))}))},Di.prototype.stop=function(){return Promise.resolve()},vr["application/x-offline-manifest"]=Di,e("shaka.offline.OfflineScheme",Li),br.offline=Li,Oi.prototype.then=function(t){return this.a=this.a.then(t).then(function(t){return this.c?(this.h(),Promise.reject(this.i)):Promise.resolve(t)}.bind(this)),this},Oi.prototype.cancel=function(t){return this.b?Promise.resolve():(this.c=!0,this.i=t,this.g)},i(Bi),e("shaka.Player",Bi),Bi.prototype.o=function(){this.A=!0;var t=Promise.resolve();return this.j&&(t=this.j.cancel(new m(7,7e3))),t.then(function(){var t=Promise.all([this.H,Vi(this),this.v?this.v.o():null,this.h?this.h.o():null]);return this.a=this.h=this.Ka=this.v=this.m=this.f=null,t}.bind(this))},Bi.prototype.destroy=Bi.prototype.o,Bi.version="v2.0.7";var Ir={};Bi.registerSupportPlugin=function(t,e){Ir[t]=e},Bi.isBrowserSupported=function(){return!!(t.Promise&&t.Uint8Array&&Array.prototype.forEach&&t.MediaSource&&t.MediaKeys&&t.navigator&&t.navigator.requestMediaKeySystemAccess&&t.MediaKeySystemAccess&&t.MediaKeySystemAccess.prototype.getConfiguration)},Bi.probeSupport=function(){return function(){var t=[],e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],i=[{videoCapabilities:e,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:e}],n={};return"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach((function(e){var r=navigator.requestMediaKeySystemAccess(e,i).then((function(t){var i=t.getConfiguration().sessionTypes;return n[e]={persistentState:!!i&&0<=i.indexOf("persistent-license")},t.createMediaKeys()})).catch((function(){n[e]=null}));t.push(r)})),Promise.all(t).then((function(){return n}))}().then((function(t){var e=function(){var t,e={};for(t in vr)e[t]=!0;for(t in yr)e[t]=!0;return["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEach((function(t){e[t]=!!vr[t]})),["mpd","m3u8","ism"].forEach((function(t){e[t]=!!yr[t]})),e}(),i=function(){var t={};return'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hvc1.1.6.L93.90",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="av1",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",video/mp2t; codecs="mp4a.40.2",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").forEach((function(e){t[e]=!!Tr[e]||MediaSource.isTypeSupported(e);var i=e.split(";")[0];t[i]=t[i]||t[e]})),t}();for(var n in t={manifest:e,media:i,drm:t},Ir)t[n]=Ir[n]();return t}))},Bi.prototype.load=function(t,e,i){var n=this.kb(),r=new Oi;return this.j=r,this.dispatchEvent(new d("loading")),function(t){return t.f||(t.a=t.a.then(function(t){return this.b=!0,Promise.resolve(t)}.bind(t),function(t){return this.b=!0,Promise.reject(t)}.bind(t))),t.f=!0,t.a}(r.then((function(){return n})).then(function(){return Zt(t,this.h,this.a.manifest.retryParameters,i)}.bind(this)).then(function(e){return this.l=new e,this.l.configure(this.a.manifest),this.l.start(t,this.h,this.Na.bind(this),this.ia.bind(this),this.Rc.bind(this))}.bind(this)).then(function(e){if(0==e.periods.length)throw new m(4,4014);return this.c=e,this.pa=t,this.g=new he(this.h,this.ia.bind(this),this.Sc.bind(this)),this.g.configure(this.a.drm),this.g.init(e,!1)}.bind(this)).then(function(){return this.c.periods.forEach(this.Na.bind(this)),this.Y=Date.now()/1e3,Promise.all([ce(this.g,this.f),this.qa])}.bind(this)).then(function(){return this.a.abr.manager.init(this.ib.bind(this)),this.i=new Je(this.f,this.c.presentationTimeline,1*Math.max(this.c.minBufferTime||0,this.a.streaming.rebufferingGoal),e||null,this.Nb.bind(this),this.Tc.bind(this)),this.C=new ye(this.f,this.F,this.m),this.b=new ai(this.i,this.C,this.h,this.c,this.Qc.bind(this),this.Rb.bind(this),this.ia.bind(this)),this.b.configure(this.a.streaming),this.b.init()}.bind(this)).then(function(){this.c.periods.forEach(this.Na.bind(this)),Yi(this),Wi(this),this.j=null}.bind(this))).catch(function(t){return this.j==r&&(this.j=null,this.dispatchEvent(new d("unloading"))),Promise.reject(t)}.bind(this))},Bi.prototype.load=Bi.prototype.load,Bi.prototype.configure=function(t){t.abr&&t.abr.manager&&t.abr.manager!=this.a.abr.manager&&(this.a.abr.manager.stop(),t.abr.manager.init(this.ib.bind(this))),ji(this.a,t,Ki(this),{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:null}},""),Fi(this)},Bi.prototype.configure=Bi.prototype.configure,Bi.prototype.getConfiguration=function(){var t=Ki(this);return ji(t,this.a,Ki(this),{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:null}},""),t},Bi.prototype.getConfiguration=Bi.prototype.getConfiguration,Bi.prototype.Jc=function(){var t=Ki(this);t.abr&&t.abr.manager&&t.abr.manager!=this.a.abr.manager&&(this.a.abr.manager.stop(),t.abr.manager.init(this.ib.bind(this))),this.a=Ki(this),Fi(this)},Bi.prototype.resetConfiguration=Bi.prototype.Jc,Bi.prototype.$b=function(){return this.f},Bi.prototype.getMediaElement=Bi.prototype.$b,Bi.prototype.rb=function(){return this.h},Bi.prototype.getNetworkingEngine=Bi.prototype.rb,Bi.prototype.Zb=function(){return this.pa},Bi.prototype.getManifestUri=Bi.prototype.Zb,Bi.prototype.S=function(){return!!this.c&&this.c.presentationTimeline.S()},Bi.prototype.isLive=Bi.prototype.S,Bi.prototype.fa=function(){return!!this.c&&this.c.presentationTimeline.fa()},Bi.prototype.isInProgress=Bi.prototype.fa,Bi.prototype.Lc=function(){var t=0,e=0;return this.c&&(t=(e=this.c.presentationTimeline).ua(),e=e.Va()),{start:t,end:e}},Bi.prototype.seekRange=Bi.prototype.Lc,Bi.prototype.keySystem=function(){return this.g?this.g.keySystem():""},Bi.prototype.keySystem=Bi.prototype.keySystem,Bi.prototype.drmInfo=function(){return this.g?this.g.b:null},Bi.prototype.drmInfo=Bi.prototype.drmInfo,Bi.prototype.dc=function(){return this.Da},Bi.prototype.isBuffering=Bi.prototype.dc,Bi.prototype.kb=function(){if(this.A)return Promise.resolve();this.dispatchEvent(new d("unloading"));var t=Promise.resolve();return this.j&&(t=this.j.cancel(new m(7,7e3))),t.then(function(){return this.H||(this.H=function(t){return t.l?Vi(t).then(function(){this.A||(this.Nb(!1),this.qa=Ui(this))}.bind(t)):Promise.resolve()}(this).then(function(){this.H=null}.bind(this))),this.H}.bind(this))},Bi.prototype.unload=Bi.prototype.kb,Bi.prototype.Ua=function(){return this.i?this.i.Ua():0},Bi.prototype.getPlaybackRate=Bi.prototype.Ua,Bi.prototype.ed=function(t){this.i&&ii(this.i,t)},Bi.prototype.trickPlay=Bi.prototype.ed,Bi.prototype.Sb=function(){this.i&&ii(this.i,1)},Bi.prototype.cancelTrickPlay=Bi.prototype.Sb,Bi.prototype.getTracks=function(){if(!this.b)return[];var t=ui(this.b);return Ce(oi(this.b),t).filter(function(t){return 0>this.oa.indexOf(t.id)}.bind(this))},Bi.prototype.getTracks=Bi.prototype.getTracks,Bi.prototype.Mc=function(t,e){if(this.b){var i=Pe(oi(this.b),t);if(i){var n=i.stream;n.allowedByApplication&&n.allowedByKeySystem&&(this.B.push({timestamp:Date.now()/1e3,id:n.id,type:t.type,fromAdaptation:!1}),(i={})[t.type]=n,"text"!=t.type&&(n=ui(this.b).text,this.configure({abr:{enabled:!1}}),n&&(i.text=n)),Hi(this,i,e))}}},Bi.prototype.selectTrack=Bi.prototype.Mc,Bi.prototype.gc=function(){return"showing"==this.m.mode},Bi.prototype.isTextTrackVisible=Bi.prototype.gc,Bi.prototype.Oc=function(t){this.m.mode=t?"showing":"hidden",$i(this)},Bi.prototype.setTextTrackVisibility=Bi.prototype.Oc,Bi.prototype.getStats=function(){qi(this);var t={},e={},i=this.f&&this.f.getVideoPlaybackQuality?this.f.getVideoPlaybackQuality():{};return this.b&&(t=(e=ui(this.b)).video||{},e=e.audio||{}),{width:t.width||0,height:t.height||0,streamBandwidth:t.bandwidth+e.bandwidth||0,decodedFrames:Number(i.totalVideoFrames),droppedFrames:Number(i.droppedVideoFrames),estimatedBandwidth:this.a.abr.manager.getBandwidthEstimate(),playTime:this.ra,bufferingTime:this.K,switchHistory:this.B.slice(0)}},Bi.prototype.getStats=Bi.prototype.getStats,Bi.prototype.addTextTrack=function(t,e,i,n,r){if(!this.b)return Promise.reject();for(var s,a=oi(this.b),o=0;o<this.c.periods.length;o++)if(this.c.periods[o]==a){if(o==this.c.periods.length-1){if(1/0==(s=this.c.presentationTimeline.ea()-a.startTime))return Promise.reject()}else s=this.c.periods[o+1].startTime-a.startTime;break}var u={id:this.Ra++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1!=e?null:new pt(1,0,s,(function(){return[t]}),0,null)},initSegmentReference:null,presentationTimeOffset:0,mimeType:n,codecs:r||"",bandwidth:0,kind:i,encrypted:!1,keyId:null,language:e,allowedByApplication:!0,allowedByKeySystem:!0};return n={language:e,type:"text",primary:!1,drmInfos:[],streams:[u]},this.oa.push(u.id),a.streamSets.push(n),hi(this.b,u).then(function(){if(!this.A)return this.oa.splice(this.oa.indexOf(u.id),1),zi(this,a),Yi(this),{id:u.id,active:!1,type:"text",bandwidth:0,language:e,kind:i,width:null,height:null}}.bind(this))},Bi.prototype.addTextTrack=Bi.prototype.addTextTrack,Bi.prototype.gb=function(t,e){this.Ca.width=t,this.Ca.height=e},Bi.prototype.setMaxHardwareResolution=Bi.prototype.gb,($n=Bi.prototype).Na=function(t){var e=this.b?ui(this.b):{};if(Ae(this.g,e,t),e=t.streamSets.some(Ne),xe(t,this.a.restrictions,this.Ca)&&!this.j&&Yi(this),t=!t.streamSets.some(Ne),!e)throw new m(4,4011);if(t)throw new m(4,4012)},$n.Uc=function(t,e,i){this.a.abr.manager.segmentDownloaded(t,e,i)},$n.Nb=function(t){qi(this),this.Da=t,this.dispatchEvent(new d("buffering",{buffering:t}))},$n.Tc=function(){this.b&&function(t){var e=Xe(t.m);if(!Object.keys(t.b).every(function(t){return 0<we(this.f,t,e)}.bind(t)))for(var i in t.b){var n=t.b[i];n.ba||n.na||(n.ga?n.na=!0:null==Te(t.f,i)?null==n.aa&&wi(t,n,0):(ki(n),Ti(t,n,!1)))}}(this.b)},$n.Qc=function(t){for(var e in this.sa=!0,this.a.abr.manager.disable(),t=Gi(this,t=Re(t,this.a),!0),this.s)t[e]=this.s[e].stream;for(e in this.s={},t)this.B.push({timestamp:Date.now()/1e3,id:t[e].id,type:e,fromAdaptation:!0});return this.j||Yi(this),t},$n.Rb=function(){for(var t in this.sa=!1,this.a.abr.enabled&&this.a.abr.manager.enable(),this.s){var e=this.s[t];ci(this.b,t,e.stream,e.Vb)}this.s={}},$n.ib=function(t,e){var i,n=ui(this.b);for(i in t){var r=t[i];n[i]!=r?this.B.push({timestamp:Date.now()/1e3,id:r.id,type:i,fromAdaptation:!0}):delete t[i]}if(!O(t)&&this.b){for(i in t)ci(this.b,i,t[i],e||!1);Wi(this)}},$n.ia=function(t){this.dispatchEvent(new d("error",{detail:t}))},$n.Rc=function(t){this.dispatchEvent(t)},$n.tc=function(){if(this.f.error){var t=this.f.error.code;if(1!=t){var e=this.f.error.msExtendedCode;e&&(0>e&&(e+=Math.pow(2,32)),e=e.toString(16)),this.ia(new m(3,3016,t,e))}}},$n.Sc=function(t){var e=["output-restricted","internal-error"],i=oi(this.b),n=!1;i.streamSets.forEach((function(i){i.streams.forEach((function(i){var r=i.allowedByKeySystem;i.keyId&&i.keyId in t&&(i.allowedByKeySystem=0>e.indexOf(t[i.keyId])),r!=i.allowedByKeySystem&&(n=!0)}))})),zi(this,i),n&&Yi(this)},e("shaka.offline.Storage",Ji),Ji.support=Xi,Ji.prototype.o=function(){var t=this.l,e=this.a,i=this.h?this.h.o().catch((function(){})).then((function(){return Promise.all(t.map((function(t){return e.remove("segment",t)})))})).then((function(){return e.o()})):Promise.resolve();return this.j=this.c=this.h=this.a=null,i},Ji.prototype.destroy=Ji.prototype.o,Ji.prototype.configure=function(t){ji(this.j,t,Zi(this),{},"")},Ji.prototype.configure=Ji.prototype.configure,Ji.prototype.ad=function(t,e,i){function n(t){s=t}if(this.v)return Promise.reject(new m(9,9006));this.v=!0;var r,s=null;return tn(this).then(function(){return nn(this),Qi(this,t,n,i)}.bind(this)).then(function(i){if(nn(this),this.b=i.manifest,this.g=i.Wb,this.b.presentationTimeline.S()||this.b.presentationTimeline.fa())throw new m(9,9005,t);this.b.periods.forEach(this.s.bind(this)),this.f=this.a.b.manifest++,this.m=0,i=this.b.periods.map(this.A.bind(this));var n=this.g.b,s=function(t){return t.a.map((function(t){return t.ha.sessionId}))}(this.g);if(n){if(!s.length)throw new m(9,9007,t);n.initData=[]}return r={key:this.f,originalManifestUri:t,duration:this.m,size:0,periods:i,sessionIds:s,drmInfo:n,appMetadata:e},Ri(this.h,r)}.bind(this)).then(function(){if(nn(this),s)throw s;return _i(this.a,"manifest",r)}.bind(this)).then(function(){return en(this)}.bind(this)).then(function(){return Ci(r)}.bind(this)).catch(function(t){return en(this).catch(R).then((function(){throw t}))}.bind(this))},Ji.prototype.store=Ji.prototype.ad,Ji.prototype.remove=function(t){function e(t){6013!=t.code&&(a=t)}var i=t.offlineUri,n=/^offline:([0-9]+)$/.exec(i);if(!n)return Promise.reject(new m(9,9004,i));var r,s,a=null,o=Number(n[1]);return tn(this).then(function(){return nn(this),this.a.get("manifest",o)}.bind(this)).then(function(t){if(nn(this),!t)throw new m(9,9003,i);return t=Mi(r=t),(s=new he(this.c.h,e,(function(){}))).configure(this.c.getConfiguration().drm),s.init(t,!0)}.bind(this)).then(function(){return function(t,e){return Promise.all(e.map(function(t){return pe(this,t).then(function(t){if(t){for(var e=new g,i=0;i<this.a.length;i++)if(this.a[i].ha==t){this.a[i].Oa=e;break}return Promise.all([t.remove(),e])}}.bind(this))}.bind(t)))}(s,r.sessionIds)}.bind(this)).then(function(){return s.o()}.bind(this)).then(function(){if(nn(this),a)throw a;var e=r.periods.map((function(t){return t.streams.map((function(t){var e=t.segments.map((function(t){return t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(t.uri),Number(t[1])}));return t.initSegmentUri&&(t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(t.initSegmentUri),e.push(Number(t[1]))),e})).reduce(N,[])})).reduce(N,[]),i=0,n=e.length,s=this.j.progressCallback;return function(t,e){var i=[];return xi(t,"segment","readwrite",(function(t){return t.openCursor()}),(function(t){if(t){if(e(t.value)){var n=t.delete(),r=new g;n.onsuccess=r.resolve,n.onerror=Ai.bind(null,n,r),i.push(r)}t.continue()}})).then((function(){return Promise.all(i)})).then((function(){return i.length}))}(this.a,function(r){return 0<=(r=e.indexOf(r.key))&&(s(t,i/n),i++),0<=r}.bind(this))}.bind(this)).then(function(){return nn(this),this.j.progressCallback(t,1),this.a.remove("manifest",o)}.bind(this))},Ji.prototype.remove=Ji.prototype.remove,Ji.prototype.list=function(){var t=[];return tn(this).then(function(){return nn(this),this.a.forEach("manifest",(function(e){t.push(Ci(e))}))}.bind(this)).then((function(){return t}))},Ji.prototype.list=Ji.prototype.list,Ji.prototype.B=function(t){var e=[];(n=t.filter((function(t){return"video"==t.type&&480>=t.height}))).sort((function(t,e){return e.bandwidth-t.bandwidth})),n.length&&e.push(n[0]);for(var i=ae(this.c.getConfiguration().preferredAudioLanguage),n=[0,wr,kr],r=t.filter((function(t){return"audio"==t.type})),s=(n=n.map((function(t){return r.filter((function(e){return e=ae(e.language),se(t,i,e)}))})),r),a=0;a<n.length;a++)n[a].length&&(s=n[a]);s.sort((function(t,e){return t.bandwidth-e.bandwidth})),s.length&&e.push(s[Math.floor(s.length/2)]);n=ae(this.c.getConfiguration().preferredTextLanguage);var o=se.bind(null,kr,n);return e.push.apply(e,t.filter((function(t){var e=ae(t.language);return"text"==t.type&&o(e)}))),e},Ji.prototype.s=function(t){function e(t,e,i){return e=e.filter((function(t){return t.type==i})),0==e.length?null:Pe(t,e[0]).stream}var i={};this.i&&(i={video:e(this.b.periods[0],this.i,"video"),audio:e(this.b.periods[0],this.i,"audio")}),Ae(this.g,i,t),xe(t,this.c.getConfiguration().restrictions,{width:1/0,height:1/0})},Ji.prototype.A=function(t){var e=Ce(t,null);e=this.j.trackSelectionCallback(e);this.i||(this.i=e,this.b.periods.forEach(this.s.bind(this)));for(var i=e.length-1;0<i;--i){for(var n=!1,r=i-1;0<=r;--r)if(e[i].type==e[r].type&&e[i].kind==e[r].kind&&e[i].language==e[r].language){n=!0;break}if(n)break}return e=e.map(function(e){return e=Pe(t,e),function(t,e,i,n){for(var r=[],s=t.b.presentationTimeline.ta(),a=s,o=n.findSegmentPosition(s),u=null!=o?n.getSegmentReference(o):null;u;){var h=t.a.b.segment++;Ni(t.h,i.type,u,(u.endTime-u.startTime)*n.bandwidth/8,function(t,e,i,n){return e={key:t,data:n,manifestKey:this.f,streamNumber:i,segmentNumber:e},this.l.push(t),_i(this.a,"segment",e)}.bind(t,h,u.position,n.id)),r.push({startTime:u.startTime,endTime:u.endTime,uri:"offline:"+t.f+"/"+n.id+"/"+h}),a=u.endTime+e.startTime,u=n.getSegmentReference(++o)}return t.m=Math.max(t.m,a-s),e=null,n.initSegmentReference&&(h=t.a.b.segment++,e="offline:"+t.f+"/"+n.id+"/"+h,Ni(t.h,i.type,n.initSegmentReference,0,function(t,e){var i={key:h,data:e,manifestKey:this.f,streamNumber:t,segmentNumber:-1};return this.l.push(h),_i(this.a,"segment",i)}.bind(t,n.id))),{id:n.id,primary:i.primary,presentationTimeOffset:n.presentationTimeOffset||0,contentType:i.type,mimeType:n.mimeType,codecs:n.codecs,frameRate:n.frameRate,kind:n.kind,language:i.language,width:n.width||null,height:n.height||null,initSegmentUri:e,encrypted:n.encrypted,keyId:n.keyId,segments:r}}(this,t,e.bd,e.stream)}.bind(this)),{startTime:t.startTime,streams:e}},Ir.offline=Xi,e("shaka.polyfill.installAll",(function(){for(var t=0;t<xr.length;++t)xr[t]()}));var _r,xr=[];e("shaka.polyfill.register",rn),rn((function(){if(t.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,(e=Document.prototype).exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",sn),document.addEventListener("webkitfullscreenerror",sn),document.addEventListener("mozfullscreenchange",sn),document.addEventListener("mozfullscreenerror",sn),document.addEventListener("MSFullscreenChange",sn),document.addEventListener("MSFullscreenError",sn)}})),rn((function(){var e=navigator.userAgent;e&&0<=e.indexOf("CrKey")&&delete t.indexedDB})),un.prototype.createMediaKeys=function(){var t=new cn(this.keySystem);return Promise.resolve(t)},un.prototype.getConfiguration=function(){return this.a},cn.prototype.createSession=function(t){if("temporary"!=(t||"temporary"))throw new TypeError("Session type "+t+" is unsupported on this platform.");return new dn(this.a)},cn.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))},i(dn),($n=dn.prototype).generateRequest=function(t,e){this.a=new g;try{this.c=this.g.createSession("video/mp4",new Uint8Array(e),null),k(this.f,this.c,"mskeymessage",this.pc.bind(this)),k(this.f,this.c,"mskeyadded",this.nc.bind(this)),k(this.f,this.c,"mskeyerror",this.oc.bind(this)),mn(this,"status-pending")}catch(t){this.a.reject(t)}return this.a},$n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},$n.update=function(t){this.b=new g;try{this.c.update(new Uint8Array(t))}catch(t){this.b.reject(t)}return this.b},$n.close=function(){try{this.c.close(),this.closed.resolve(),E(this.f)}catch(t){this.closed.reject(t)}return this.closed},$n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},$n.pc=function(t){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new d("message",{messageType:null==this.keyStatuses.Wa()?"licenserequest":"licenserenewal",message:t.message.buffer}))},$n.nc=function(){this.a?(mn(this,"usable"),this.a.resolve(),this.a=null):this.b&&(mn(this,"usable"),this.b.resolve(),this.b=null)},$n.oc=function(){var t=Error("EME PatchedMediaKeysMs key error");if(t.errorCode=this.c.error,this.a)this.a.reject(t),this.a=null;else if(this.b)this.b.reject(t),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:mn(this,"output-not-allowed");default:mn(this,"internal-error")}},($n=gn.prototype).hb=function(t){this.size=null==t?0:1,this.a=t},$n.Wa=function(){return this.a},$n.forEach=function(t){this.a&&t(this.a,_r)},$n.get=function(t){if(this.has(t))return this.a},$n.has=function(t){var e=_r;return!(!this.a||!q(new Uint8Array(t),new Uint8Array(e)))},$n.keys=function(){},yn.prototype.createSession=function(){},yn.prototype.setServerCertificate=function(){},Tn.prototype.getConfiguration=function(){},Tn.prototype.createMediaKeys=function(){};var Ar,Cr="";In.prototype.createMediaKeys=function(){var t=new _n(this.a);return Promise.resolve(t)},In.prototype.getConfiguration=function(){return this.b},($n=_n.prototype).createSession=function(t){var e=t||"temporary";if("temporary"!=e&&"persistent-license"!=e)throw new TypeError("Session type "+t+" is unsupported on this platform.");return(t=this.b||document.createElement("video")).src||(t.src="about:blank"),e=new Cn(t,this.g,e),this.c.push(e),e},$n.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))},$n.yc=function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("encrypted",!1,!1,null),e.initDataType="webm",e.initData=t.initData,this.b.dispatchEvent(e)},$n.xc=function(t){var e=An(this,t.sessionId);e&&(t=new d("message",{messageType:null==e.keyStatuses.Wa()?"licenserequest":"licenserenewal",message:t.message}),e.b&&(e.b.resolve(),e.b=null),e.dispatchEvent(t))},$n.vc=function(t){(t=An(this,t.sessionId))&&(Nn(t,"usable"),t.a&&t.a.resolve(),t.a=null)},$n.wc=function(t){var e=An(this,t.sessionId);if(e){var i=Error("EME v0.1b key error");i.errorCode=t.errorCode,i.errorCode.systemCode=t.systemCode,!t.sessionId&&e.b?(i.method="generateRequest",45==t.systemCode&&(i.message="Unsupported session type."),e.b.reject(i),e.b=null):t.sessionId&&e.a?(i.method="update",e.a.reject(i),e.a=null):(i=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Nn(e,"output-restricted"):Nn(e,1==i?"expired":"internal-error"))}},i(Cn),($n=Cn.prototype).jb=function(t,e){if(this.a)this.a.then(this.jb.bind(this,t,e)).catch(this.jb.bind(this,t,e));else{var i,n;this.a=t,"webkit-org.w3.clearkey"==this.c?(i=wt(e),"oct"!=(n=JSON.parse(i)).keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),i=V(n.keys[0].k),n=V(n.keys[0].kid)):(i=new Uint8Array(e),n=null);var r=kn("addKey");try{this.f[r](this.c,i,n,this.sessionId)}catch(t){this.a.reject(t),this.a=null}}},$n.generateRequest=function(t,e){return Pn(this,e,null)},$n.load=function(t){return"persistent-license"==this.g?Pn(this,null,t):Promise.reject(Error("Not a persistent session."))},$n.update=function(t){var e=new g;return this.jb(e,t),e},$n.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var t=kn("cancelKeyRequest");try{this.f[t](this.c,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},$n.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},($n=Rn.prototype).hb=function(t){this.size=null==t?0:1,this.a=t},$n.Wa=function(){return this.a},$n.forEach=function(t){this.a&&t(this.a,Ar)},$n.get=function(t){if(this.has(t))return this.a},$n.has=function(t){var e=Ar;return!(!this.a||!q(new Uint8Array(t),new Uint8Array(e)))},$n.keys=function(){},rn((function(){!t.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?wn("webkit"):HTMLMediaElement.prototype.generateKeyRequest?wn(""):t.MSMediaKeys?(_r=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=hn,t.MediaKeys=cn,t.MediaKeySystemAccess=un,navigator.requestMediaKeySystemAccess=on):(navigator.requestMediaKeySystemAccess=bn,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=vn,t.MediaKeys=yn,t.MediaKeySystemAccess=Tn))})),rn((function(){if(t.MediaSource){var e=navigator.vendor,i=navigator.appVersion;!e||!i||0>e.indexOf("Apple")||(0<=i.indexOf("Version/8")?t.MediaSource=null:0<=i.indexOf("Version/9")?Dn():0<=i.indexOf("Version/10")&&(Dn(),function(){var t=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(){for(var e=0,i=0;i<this.sourceBuffers.length;++i){var n=(n=this.sourceBuffers[i]).buffered.end(n.buffered.length-1);e=Math.max(e,n)}if(!isNaN(this.duration)&&e<this.duration)for(this.sb=!0,i=0;i<this.sourceBuffers.length;++i)(n=this.sourceBuffers[i]).ob=!1;return t.apply(this,arguments)};var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,arguments);return t.F=this,t.addEventListener("updateend",Mn,!1),this.a||(this.addEventListener("sourceclose",Ln,!1),this.a=!0),t}}()))}}));var Pr=0;On.prototype.then=function(t,e){var i=new On;switch(this.ka){case 1:Vn(this,i,t);break;case 2:Vn(this,i,e);break;case Pr:this.c.push({J:i,Ea:t}),this.b.push({J:i,Ea:e})}return i},On.prototype.catch=function(t){return this.then(void 0,t)},On.prototype.X=function(t){if(this.ka==Pr){for(this.Pa=t,this.ka=1,t=0;t<this.c.length;++t)Vn(this,this.c[t].J,this.c[t].Ea);this.c=[],this.b=[]}},On.prototype.a=function(t){if(this.ka==Pr){for(this.Pa=t,this.ka=2,t=0;t<this.b.length;++t)Vn(this,this.b[t].J,this.b[t].Ea);this.c=[],this.b=[]}};var Nr=null,Rr=[];rn((function(e){t.setImmediate?(qn=function(e){return t.setImmediate(e)},Gn=function(e){return t.clearImmediate(e)}):(qn=function(e){return t.setTimeout(e,0)},Gn=function(e){return t.clearTimeout(e)}),t.Promise&&!e||(t.Promise=On,t.Promise.resolve=jn,t.Promise.reject=Bn,t.Promise.all=Un,t.Promise.race=Fn,t.Promise.prototype.then=On.prototype.then,t.Promise.prototype.catch=On.prototype.catch)})),rn((function(){if(t.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in e&&(e.getVideoPlaybackQuality=zn)}})),rn((function(){if(!t.VTTCue&&t.TextTrackCue){var e=TextTrackCue.length;if(3==e)t.VTTCue=Wn;else if(6==e)t.VTTCue=Yn;else{var i;try{i=!!Wn(1,2,"")}catch(t){i=!1}i&&(t.VTTCue=Wn)}}}))}).call(r,this),void 0!==t&&t.exports?t.exports=r.shaka:void 0===(n=function(){return r.shaka}.call(e,i,e,t))||(t.exports=n)}()}});